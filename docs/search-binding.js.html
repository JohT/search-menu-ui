<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: search-binding.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: search-binding.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Configures the search service client, assembles all parts and attaches it to the ui (start()).
 * @version {@link https://github.com/JohT/search-menu-ui/releases/latest latest version}
 * @author JohT
 */

var httpSearchClient;
var searchService = searchService || require("./search-service-client"); // supports vanilla js &amp; npm
var searchmenu = searchmenu || require("./search-menu-ui"); // supports vanilla js &amp; npm
var restruct = restruct || require("./restruct-data-client"); // supports vanilla js &amp; npm
var template_resolver = template_resolver || require("data-restructor/devdist/templateResolver"); // supports vanilla js &amp; npm

// Locally mocked search with a view pre-queried search results (for local debugging and testing)
httpSearchClient = new searchService.HttpSearchConfig()
  .searchMethod("GET")
  .searchUrlTemplate("/data/AccountSearchResult-{{searchtext}}.json")
  .debugMode(true)
  .build();

// Search using elasticsearch multisearch
httpSearchClient = new searchService.HttpSearchConfig()
  .searchMethod("POST")
  .searchContentType("application/x-ndjson")
  .searchUrlTemplate(
    "http://localhost:9200/_msearch/template?filter_path=responses.hits.total.value,responses.hits.hits._source,hits.responses.hits.highlight,responses.aggregations.*.buckets"
  )
  .searchBodyTemplate(
    '{"index": "accounts"}\n' +
      '{"id": "account_search_as_you_type_v1", "params":{{jsonSearchParameters}}}\n' +
      '{"index": "accounts"}\n' +
      '{"id": "account_tags_v1", "params":{"account_aggregations_prefix": "", "account_aggregations_size": 10}}\n' +
      '{"index": "sites"}\n' +
      '{"id": "sites_default_v1", "params":{"tenantnumber":{{tenantnumber}}}}\n' +
      '{"index": "sites"}\n' +
      '{"id": "sites_search_as_you_type_v1", "params":{{jsonSearchParameters}}}\n'
  )
  .debugMode(true)
  .build();

// Configure and start the search bar functionality.
new searchmenu.SearchMenuAPI()
  .searchService(httpSearchClient.search)
  .dataConverter(new restruct.DataConverter().createDataConverter(true))
  .templateResolver(function (template, sourceObject) {
    return new template_resolver.Resolver(sourceObject).resolveTemplate(template);
  })
  .addPredefinedParametersTo(function (searchParameters) {
    searchParameters.tenantnumber = 999;
  })
  .addFocusStyleClassOnEveryCreatedElement("searchresultfocus")
  .start();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-restruct.html">restruct</a></li><li><a href="module-searchmenu.html">searchmenu</a></li><li><a href="module-searchService.html">searchService</a></li></ul><h3>Classes</h3><ul><li><a href="DataConverter.html">DataConverter</a></li><li><a href="module-searchmenu.SearchMenuAPI.html">SearchMenuAPI</a></li><li><a href="module-searchmenu.SearchMenuUI.html">SearchMenuUI</a></li><li><a href="module-searchmenu.SearchViewDescriptionBuilder.html">SearchViewDescriptionBuilder</a></li><li><a href="module-searchService.HttpClient.html">HttpClient</a></li><li><a href="module-searchService.HttpSearchConfig.html">HttpSearchConfig</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.6</a> on Tue May 11 2021 21:36:13 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
