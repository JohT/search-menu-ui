var module=module||{},require=require||function(){};"function"!=typeof Object.create&&(Object.create=function(e){var t=function(){};return function(e,n){if(e!==Object(e)&&null!==e)throw TypeError("Argument must be an object, or null");t.prototype=e||{},void 0!==n&&Object.defineProperties(t.prototype,n);var r=new t;return t.prototype=null,null===e&&(r.__proto__=null),r}}()),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n,r;if(null===this)throw new TypeError(" this is null or not defined");var i=Object(this),o=i.length>>>0;if("function"!=typeof e)throw new TypeError(e+" is not a function");for(arguments.length>1&&(n=t),r=0;r<o;){var l;r in i&&(l=i[r],e.call(n,l,r,i)),r++}}),"object"!=typeof JSON&&(JSON={}),function(){"use strict";var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta,rep;function f(e){return e<10?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,o,l,u=gap,s=t[e];switch(s&&"object"==typeof s&&"function"==typeof s.toJSON&&(s=s.toJSON(e)),"function"==typeof rep&&(s=rep.call(t,e,s)),typeof s){case"string":return quote(s);case"number":return isFinite(s)?String(s):"null";case"boolean":case"null":return String(s);case"object":if(!s)return"null";if(gap+=indent,l=[],"[object Array]"===Object.prototype.toString.apply(s)){for(o=s.length,n=0;n<o;n+=1)l[n]=str(n,s)||"null";return i=0===l.length?"[]":gap?"[\n"+gap+l.join(",\n"+gap)+"\n"+u+"]":"["+l.join(",")+"]",gap=u,i}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof rep[n]&&(i=str(r=rep[n],s))&&l.push(quote(r)+(gap?": ":":")+i);else for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(i=str(r,s))&&l.push(quote(r)+(gap?": ":":")+i);return i=0===l.length?"{}":gap?"{\n"+gap+l.join(",\n"+gap)+"\n"+u+"}":"{"+l.join(",")+"}",gap=u,i}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value),"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(void 0!==(r=walk(i,n))?i[n]=r:delete i[n]);return reviver.call(e,t,i)}if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();"use strict";var module=module||{},eventlistener=module.exports={};eventlistener.addEventListener=function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n};var module=module||{},eventtarget=module.exports={};eventtarget.getEventTarget=function(e){if(void 0!==e.currentTarget&&null!=e.currentTarget)return e.currentTarget;if(void 0!==e.srcElement&&null!=e.srcElement)return e.srcElement;throw new Error("Event doesn't contain bounded element: "+e)};var module=module||{},selectionrange=module.exports={};selectionrange.moveCursorToEndOf=function(e){if("function"==typeof e.setSelectionRange)e.setSelectionRange(e.value.length,e.value.length);else if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd)e.selectionStart=e.selectionEnd=e.value.length;else if("function"==typeof e.createTextRange){var t=e.createTextRange();t.collapse(!0),t.moveEnd("character",e.value.length),t.moveStart("character",e.value.length),t.select()}};var module=module||{},xmlHttpRequest=module.exports={};xmlHttpRequest.getXMLHttpRequest=function(){if("undefined"!=typeof XMLHttpRequest)try{var e=new XMLHttpRequest;return e.status,e}catch(e){console.log("XMLHttpRequest not available: "+e)}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(e){console.log("XMLHttpRequest Msxml2.XMLHTTP.6.0 not available: "+e)}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(e){console.log("XMLHttpRequest Msxml2.XMLHTTP.3.0 not available: "+e)}try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(e){console.log("XMLHttpRequest Microsoft.XMLHTTP not available: "+e)}throw new Error("This browser does not support XMLHttpRequest.")};var module=datarestructorInternalCreateIfNotExists(module);function datarestructorInternalCreateIfNotExists(e){return e||{}}var searchMenuServiceClient=module.exports={};searchMenuServiceClient.internalCreateIfNotExists=datarestructorInternalCreateIfNotExists;var xmlHttpRequest=xmlHttpRequest||require("../../src/js/ponyfills/xmlHttpRequestPonyfill");searchMenuServiceClient.HttpSearchConfig=function(){function e(e,n,r){if(null==e)return null;var i,o=JSON.stringify(n),l=e;return l=t(l,"jsonSearchParameters",o),i=l,function(e,t){var n,r,i,o=Object.keys(e);for(n=0;n<o.length;n+=1)r=o[n],i=e[r],t(r,i)}(n,function(e,n){i=t(i,e,n)}),l=i,r&&(console.log("template="+e),console.log("{{jsonSearchParameters}}="+o),console.log("resolved template="+l)),l}function t(e,t,n){var r,i,o=new RegExp("\\{\\{"+(r=t,i=new RegExp("([^-\\w])","gi"),r.replace(i,"\\$1"))+"\\}\\}","gm");return e.replace(o,n)}return function(){this.config={searchUrlTemplate:"",searchMethod:"POST",searchContentType:"application/json",searchBodyTemplate:null,resolveSearchUrl:function(t){return e(this.searchUrlTemplate,t,this.debugMode)},resolveSearchBody:function(t){return e(this.searchBodyTemplate,t,this.debugMode)},httpRequest:null,debugMode:!1},this.searchUrlTemplate=function(e){return this.config.searchUrlTemplate=e,this},this.searchMethod=function(e){return this.config.searchMethod=e,this},this.searchContentType=function(e){return this.config.searchContentType=e,this},this.searchBodyTemplate=function(e){return this.config.searchBodyTemplate=e,this},this.httpRequest=function(e){return this.config.httpRequest=e,this},this.debugMode=function(e){return this.config.debugMode=!0===e,this},this.build=function(){return this.config.httpRequest||(this.config.httpRequest=xmlHttpRequest.getXMLHttpRequest()),new searchMenuServiceClient.HttpClient(this.config)}}}(),searchMenuServiceClient.HttpClient=function(){return function(e){this.config=e,this.search=function(e,t){return function(n,r){var i,o=e.resolveSearchUrl(n),l=e.resolveSearchBody(n),u={url:o,method:e.searchMethod,contentType:e.searchContentType,body:l};e.debugMode&&(i=r,r=function(e,t){console.log("successful search response with code "+t+": "+JSON.stringify(e,null,2)),i(e,t)}),function(e,t,n,r){t.onreadystatechange=function(){if(4===t.readyState)if(t.status>=200&&t.status<=299){var e=JSON.parse(t.responseText);n(e,t.status)}else r(t.responseText,t.status)},t.open(e.method,e.url,!0),t.setRequestHeader("Content-Type",e.contentType),t.send(e.body)}(u,t,r,function(e,t){console.error("search failed with status code "+t+": "+e)})}}(this.config,this.config.httpRequest)}}();var module=datarestructorInternalCreateIfNotExists(module);function datarestructorInternalCreateIfNotExists(e){return e||{}}var searchmenu=module.exports={};searchmenu.internalCreateIfNotExists=datarestructorInternalCreateIfNotExists;var eventtarget=eventtarget||require("./ponyfills/eventCurrentTargetPonyfill"),selectionrange=selectionrange||require("./ponyfills/selectionRangePonyfill"),eventlistener=eventlistener||require("./ponyfills/addEventListenerPonyfill");searchmenu.SearchViewDescriptionBuilder=function(){function e(e,t){return function(e){return"string"==typeof e&&null!=e&&""!=e}(e)?e:t}return function(t){this.description={viewElementId:t?t.viewElementId:"",listParentElementId:t?t.listParentElementId:"",listEntryElementIdPrefix:t?t.listEntryElementIdPrefix:"",listEntryElementTag:t?t.listEntryElementTag:"li",listEntryTextTemplate:t?t.listEntryTextTemplate:"{{displayName}}: {{value}}",listEntrySummaryTemplate:t?t.listEntrySummaryTemplate:"{{summaries[0].displayName}}: {{summaries[0].value}}",listEntryStyleClassTemplate:t?t.listEntryStyleClassTemplate:"{{view.listEntryElementIdPrefix}} {{category}}",isSelectableFilterOption:!!t&&t.isSelectableFilterOption},this.viewElementId=function(t){return this.description.viewElementId=e(t,""),this},this.listParentElementId=function(t){return this.description.listParentElementId=e(t,""),this},this.listEntryElementIdPrefix=function(t){return this.description.listEntryElementIdPrefix=e(t,""),this},this.listEntryElementTag=function(t){return this.description.listEntryElementTag=e(t,"li"),this},this.listEntryTextTemplate=function(t){return this.description.listEntryTextTemplate=e(t,"{{displayName}}: {{value}}"),this},this.listEntrySummaryTemplate=function(t){return this.description.listEntrySummaryTemplate=e(t,"{{summaries[0].displayName}}: {{summaries[0].value}}"),this},this.listEntryStyleClassTemplate=function(t){return this.description.listEntryStyleClassTemplate=e(t,"{{view.listEntryElementIdPrefix}} {{category}}"),this},this.isSelectableFilterOption=function(e){return this.description.isSelectableFilterOption=!0===e,this},this.build=function(){return this.description}}}(),searchmenu.SearchMenuAPI=function(){function e(e,t,n){eventlistener.addEventListener(e,t,n)}function t(e){return eventtarget.getEventTarget(e)}function n(e,t){var n=new RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function r(e,t){return function(e){return"string"==typeof e&&null!=e&&""!=e}(e)?e:t}return function(){this.config={triggerSearch:function(){throw new Error("search service needs to be defined.")},convertData:function(e){return e},resolveTemplate:function(){throw new Error("template resolver needs to be defined.")},addPredefinedParametersTo:function(){},onCreatedElement:function(){},navigateTo:function(e){window.location.href=e},createdElementListeners:[],searchAreaElementId:"searcharea",inputElementId:"searchinputtext",searchTextParameterName:"searchtext",resultsView:(new searchmenu.SearchViewDescriptionBuilder).viewElementId("searchresults").listParentElementId("searchmatches").listEntryElementIdPrefix("result").listEntryTextTemplate("{{abbreviation}} {{displayName}}").listEntrySummaryTemplate("{{summaries[0].abbreviation}} <b>{{summaries[1].value}}</b><br>{{summaries[2].value}}: {{summaries[0].value}}").build(),detailView:(new searchmenu.SearchViewDescriptionBuilder).viewElementId("searchdetails").listParentElementId("searchdetailentries").listEntryElementIdPrefix("detail").listEntryTextTemplate("<b>{{displayName}}:</b> {{value}}").build(),filterOptionsView:(new searchmenu.SearchViewDescriptionBuilder).viewElementId("searchfilteroptions").listParentElementId("searchfilteroptionentries").listEntryElementIdPrefix("filter").listEntryTextTemplate("{{value}}").listEntrySummaryTemplate("{{summaries[0].value}}").isSelectableFilterOption(!0).build(),filtersView:(new searchmenu.SearchViewDescriptionBuilder).viewElementId("searchresults").listParentElementId("searchfilters").listEntryElementIdPrefix("filter").isSelectableFilterOption(!0).build(),waitBeforeClose:700,waitBeforeSearch:500,waitBeforeMouseOver:700},this.searchService=function(e){return this.config.triggerSearch=e,this},this.dataConverter=function(e){return this.config.convertData=e,this},this.templateResolver=function(e){return this.config.resolveTemplate=e,this},this.addPredefinedParametersTo=function(e){return this.config.addPredefinedParametersTo=e,this},this.setElementCreatedHandler=function(e){return this.config.onCreatedElement=e,this},this.addElementCreatedHandler=function(e){return this.config.createdElementListeners.push(e),this},this.addFocusStyleClassOnEveryCreatedElement=function(i){var o=r(i,"focus");return this.addElementCreatedHandler(function(r,i){i&&(e("focus",r,function(e){!function(e,t){n(e,t);var r=t.className.length>0?" ":"";t.className+=r+e}(o,t(e))}),e("blur",r,function(e){n(o,t(e))}))}),this},this.searchAreaElementId=function(e){return this.config.searchAreaElementId=r(e,"searcharea"),this},this.inputElementId=function(e){return this.config.inputElementId=r(e,"searchinputtext"),this},this.searchTextParameterName=function(e){return this.config.searchTextParameterName=r(e,"searchtext"),this},this.resultsView=function(e){return this.config.resultsView=e,this},this.detailView=function(e){return this.config.detailView=e,this},this.filterOptionsView=function(e){return this.config.filterOptionsView=e,this},this.filtersView=function(e){return this.config.filtersView=e,this},this.waitBeforeClose=function(e){return this.config.waitBeforeClose=e,this},this.waitBeforeSearch=function(e){return this.config.waitBeforeSearch=e,this},this.waitBeforeMouseOver=function(e){return this.config.waitBeforeMouseOver=e,this},this.start=function(){var e=this.config;return e.createdElementListeners.length>0&&this.setElementCreatedHandler(function(t,n){var r=0;for(r=0;r<e.createdElementListeners.length;r+=1)e.createdElementListeners[r](t,n)}),new searchmenu.SearchMenuUI(e)}}}(),searchmenu.SearchMenuUI=function(){function e(e,o,l){var u,c,f,d=l.resultsView.listEntryElementIdPrefix+"--"+o,h=V(e,l.resultsView,d,l.resolveTemplate),m=B(e,l.resultsView,d,h);if(F(H(e,l.resultsView,l.resolveTemplate),m),M(m,l.onCreatedElement),function(e){return void 0!==e.details}(e)&&(r(m,s(e.details,l,w)),u=m,c=l.waitBeforeMouseOver,f=s(e.details,l,w),G("mouseover",u,function(e){this.originalEvent=function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i];t[i]=o}return t}(e),this.delayedHandlerTimer=window.setTimeout(function(){f(void 0!==this.originalEvent?this.originalEvent:e)},c),this.preventEventHandling=function(){null!==this.delayedHandlerTimer&&clearTimeout(this.delayedHandlerTimer)},G("mouseout",u,this.preventEventHandling),G("mousedown",u,this.preventEventHandling),G("keydown",u,this.preventEventHandling)}),i(m,function(){var t,n,r=(t=l.filtersView.listParentElementId,n=y(e,"category",""),E(t,function(e){var t=a(e.id).hiddenFields(),r=y(t,"urltemplate",[""])[0];if(""===r)return null;var i=y(t,n,"");return i!=n&&""!==i?null:D("inactive",e)?null:r.value}));if(r){var i=l.resolveTemplate(r,e);l.navigateTo(i)}})),function(e){return void 0!==e.options}(e)){var p=e.options;if(function(e){return void 0!==e.default}(e))p=function(e,t,n){if(!t)return e;var r,i=!1;for(r=0;r<e.length;r+=1)if(n(e[r],t)){i=!0;break}if(i)return e;var o=[];for(o.push(t),r=0;r<e.length;r+=1)o.push(e[r]);return o}(e.options,e.default[0],t(["value"])),function(e,t,n){Y(e,s(t,n,T))}(g(e.default[0],p,l.filtersView,l),p,l);r(m,s(e.options,l,T)),i(m,s(e.options,l,T))}n(m,l)}function t(e){return function(t,n){var r;for(r=0;r<e.length;r+=1)if(t[e[r]]!=n[e[r]])return!1;return!0}}function n(e,t){W(e,u(t,d)),$(e,u(t,h)),X(e,u(t,c)),z(e,u(t,b))}function r(e,t){Y(e,t),Z(e,t)}function i(e,t){G("mousedown",e,t),U(e,t)}function o(e,t){G("mousedown",e,t),U(e,t),Y(e,t)}function l(e,t){!function(e,t){G("keydown",e,function(e){"Del"!=e.key&&"Delete"!=e.key&&46!=Q(e)||t(e)})}(e,t),function(e,t){G("keydown",e,function(e){"Backspace"!=e.key&&8!=Q(e)||t(e)})}(e,t)}function u(e,t){return function(n){t(n,e)}}function s(e,t,n){return function(r){n(r,e,t)}}function a(e){var t=e.split("--");t.length<2&&console.log("expected at least one '--' separator inside the id "+e);var n=t[0],r=parseInt(t[1]),i=t[t.length-2],o=parseInt(t[t.length-1]),l=e.substring(0,e.lastIndexOf(o)-"--".length);return{id:e,type:i,index:o,previousId:l+"--"+(o-1),nextId:l+"--"+(o+1),firstId:l+"--1",lastId:l+"--"+document.getElementById(e).parentElement.childNodes.length,mainMenuId:n+"--"+r,mainMenuIndex:r,hiddenFieldsId:e+"--fields",isFirstElement:o<=1,isSubMenu:t.length>3,subMenuId:function(t){return e+"--"+t+"--1"},replaceMainMenuIndex:function(t){return n+"--"+t+e.substring(this.mainMenuId.length)},getNewIndexAfterRemovedMainMenuIndex:function(t){if(r<t)return e;if(r==t)throw new Error("index "+t+" should had been removed.");return this.replaceMainMenuIndex(r-1)},hiddenFields:function(){var t=document.getElementById(e+"--fields"),n=y(t,"textContent",t.innerText);return JSON.parse(n)}}}function c(e,t){var n=K(e),r=document.getElementById(t.inputElementId);return n.blur(),r.focus(),selectionrange.moveCursorToEndOf(r),S(e),k(t),r}function f(e,t){var n=K(e),r=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1");r&&(n.blur(),r.focus())}function d(e,t){m(e,function(e){var n=null;return e.type===t.resultsView.listEntryElementIdPrefix&&(n=document.getElementById(t.filterOptionsView.listEntryElementIdPrefix+"--1")),null===n&&(n=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1")),n}),k(t)}function h(e,t){p(e,function(n){var r=null;if(n.type===t.filterOptionsView.listEntryElementIdPrefix){var i=C(t.resultsView.listEntryElementIdPrefix);r=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--"+i)}return null===r?c(e,t):r}),k(t)}function m(e,t){var n=K(e),r=a(n.id);r.isSubMenu&&S(e);var i=document.getElementById(r.nextId);null==i&&"function"==typeof t&&(i=t(r)),null==i&&(i=document.getElementById(r.firstId)),null!=i&&(n.blur(),i.focus())}function p(e,t){var n=K(e),r=a(n.id);r.isSubMenu&&S(e);var i=document.getElementById(r.previousId);null==i&&"function"==typeof t&&(i=t(r)),null==i&&(i=document.getElementById(r.lastId)),null!=i&&(n.blur(),i.focus())}function v(e,n,r){!function(e,t,n){Y(e,O),l(e,u(n,N))}(g(function(e,t,n){var r,i,o=a(e).hiddenFields();for(r=0;r<t.length;r+=1)if(i=t[r],n(i,o))return i;return console.log("error: no selected entry found for id "+e+" in "+t),null}(K(e).id,n,t(["fieldName","value"])),n,r.filtersView,r),0,r),S(e),x(e)}function g(e,t,r,i){var o,l,u,c,f,d,h,m,p,v=C(r.listEntryElementIdPrefix),g=r.listEntryElementIdPrefix+"--"+(v+1),w=y(e,"category",""),I=(o=w,l=e.fieldName,u=r.listParentElementId,c=null,null!=(f=E(u,function(e){var t=a(e.id).hiddenFields();if(t.fieldName===l){var n=y(t,"category","");if(""===n)c=e;else if(n===o)return e}}))?f:c);if(null!=I){var x=V(e,r,I.id,i.resolveTemplate);return h=x,(d=I).innerHTML=h,I=d}return I=B(e,r,g,V(e,r,g,i.resolveTemplate)),F(H(e,r,i.resolveTemplate),I),M(I,i.onCreatedElement),m=I,p=s(t,i,T),G("mousedown",m,p),U(m,p),Z(m,p),n(I,i),I}function y(e,t,n){return void 0===e[t]?n:e[t]}function E(e,t){var n,r,i=document.getElementById(e);for(n=0;n<i.childNodes.length;n+=1)if(r=t(i.childNodes[n]))return r;return null}function w(e,t,n){k(n),I(e,t,n.detailView,n),S(e)}function T(e,t,n){k(n),I(e,t,n.filterOptionsView,n)}function I(e,t,n,r){!function(e){var t=document.getElementById(e);if("function"==typeof t.cloneNode&&"function"==typeof t.replaceChild){var n=t.cloneNode(!1);t.parentNode.replaceChild(n,t)}else t.innerHTML=""}(n.listParentElementId);var i,l=K(e),u=null,a=null,c=0,f=l.id+"--"+n.listEntryElementIdPrefix,d=null;for(c=0;c<t.length;c+=1)a=B(u=t[c],n,f=l.id+"--"+n.listEntryElementIdPrefix+"--"+(c+1),V(u,n,f,r.resolveTemplate)),F(H(u,n,r.resolveTemplate),a),M(a,r.onCreatedElement),n.isSelectableFilterOption&&(W(i=a,m),$(i,p),z(i,x),X(i,x),o(a,s(t,r,v))),0===c&&(d=a);var h=_(l,function(e){return"DIV"==e.tagName}),g=document.getElementById(n.viewElementId),y=h.offsetWidth+15,E=function(e){var t=e.getBoundingClientRect();if(void 0!==t.y)return t.y;return t.top}(l)+function(){if(void 0!==window.pageYOffset)return window.pageYOffset;if("CSS1Compat"===(document.compatMode||""))return document.documentElement.scrollTop;return document.body.scrollTop}();g.style.left=y+"px",g.style.top=E+"px",q(g),n.isSelectableFilterOption&&(l.blur(),d.focus())}function x(e){var t=K(e),n=a(t.id),r=document.getElementById(n.mainMenuId);t.blur(),r.focus(),function(e){var t=_(e,function(e){return D("show",e)});if(null!=t)A(t)}(t)}function b(e,t){k(t)}function S(e){void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1}function O(e){S(e);var t,n,r=K(e);D(t="inactive",n=r)?J(t,n):F(t,n)}function N(e,t){S(e),h(e,t),function(e){var t=K(e),n=t.parentElement,r=a(t.id).mainMenuIndex;n.removeChild(t),function e(t,n,r,i){if(n>r||!t.childNodes)return;P(t.childNodes,function(t){i(t),e(t,n+1,r,i)})}(n,0,5,function(e){e.id&&(e.id=a(e.id).getNewIndexAfterRemovedMainMenuIndex(r))})}(e)}function M(e,t){e.id&&t(e,!0),P(e.childNodes,function(e){e.id&&t(e,!1)})}function P(e,t){var n=0;for(n=0;n<e.length;n+=1)t(e[n],n+1)}function C(e){var t=document.getElementById(e+"--1");return null===t?0:t.parentElement.childNodes.length}function B(e,t,n,r){var i=function(e,t,n){var r=document.createElement(n);return r.id=t,r.tabIndex="0",r.innerHTML=e,r}(r,n,t.listEntryElementTag);return document.getElementById(t.listParentElementId).appendChild(i),i}function V(e,t,n,r){var i=r(t.listEntryTextTemplate,e);return void 0!==e.summaries&&(i=r(t.listEntrySummaryTemplate,e)),i+='<p id="'+n+'--fields" style="display: none">'+JSON.stringify(e)+"</p>"}function H(e,t,n){var r=n(t.listEntryStyleClassTemplate,e);return r=n(r,{view:t})}function R(e){L(e.resultsView.viewElementId),L(e.detailView.viewElementId),L(e.filterOptionsView.viewElementId)}function k(e){L(e.detailView.viewElementId),L(e.filterOptionsView.viewElementId)}function j(e){q(document.getElementById(e))}function q(e){F("show",e)}function L(e){A(document.getElementById(e))}function _(e,t){for(var n=e;null!=n;){if(t(n))return n;n=n.parentNode}return null}function A(e){J("show",e)}function F(e,t){J(e,t);var n=t.className.length>0?" ":"";t.className+=n+e}function J(e,t){var n=new RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function D(e,t){return null!=t.className&&t.className.indexOf(e)>=0}function X(e,t){G("keydown",e,function(e){"Escape"!=e.key&&"Esc"!=e.key&&27!=Q(e)||t(e)})}function U(e,t){G("keydown",e,function(e){"Enter"!=e.key&&13!=Q(e)||t(e)})}function Y(e,t){G("keydown",e,function(e){" "!=e.key&&"Spacebar"!=e.key&&32!=Q(e)||t(e)})}function $(e,t){G("keydown",e,function(e){"ArrowUp"!=e.key&&"Up"!=e.key&&38!=Q(e)||t(e)})}function W(e,t){G("keydown",e,function(e){"ArrowDown"!=e.key&&"Down"!=e.key&&40!=Q(e)||t(e)})}function Z(e,t){G("keydown",e,function(e){"ArrowRight"!=e.key&&"Right"!=e.key&&39!=Q(e)||t(e)})}function z(e,t){G("keydown",e,function(e){"ArrowLeft"!=e.key&&"Left"!=e.key&&37!=Q(e)||t(e)})}function G(e,t,n){eventlistener.addEventListener(e,t,n)}function K(e){return eventtarget.getEventTarget(e)}function Q(e){return void 0===e.keyCode?-1:e.keyCode}return function(t){this.config=t,this.currentSearchText="",this.focusOutTimer=null,this.waitBeforeSearchTimer=null;var n=document.getElementById(t.inputElementId);X(n,function(e){K(e).value="",R(t)}),W(n,u(t,f)),G("keyup",n,function(n){null!==this.waitBeforeSearchTimer&&clearTimeout(this.waitBeforeSearchTimer);var r=K(n).value;this.waitBeforeSearchTimer=window.setTimeout(function(){r===this.currentSearchText&&""!==this.currentSearchText||(function(t,n){document.getElementById(n.resultsView.listParentElementId).innerHTML="",0!==t.length?(j(n.resultsView.viewElementId),function(t,n){var r,i,o=(r=n.filtersView.listParentElementId,i={},E(r,function(e){var t=a(e.id).hiddenFields();return void 0===t.fieldName||void 0===t.value?null:D("inactive",e)?null:void(i[t.fieldName]=t.value)}),i);o[n.searchTextParameterName]=t,n.addPredefinedParametersTo(o),n.triggerSearch(o,function(t){!function(t,n){var r=0;for(r=0;r<t.length;r+=1)e(t[r],r+1,n)}(n.convertData(t),n)})}(t,n)):R(n)}(r,t),this.currentSearchText=r)},t.waitBeforeSearch)});var r=document.getElementById(t.searchAreaElementId);G("focusin",r,function(){""!==document.getElementById(t.inputElementId).value&&(null!=this.focusOutTimer&&clearTimeout(this.focusOutTimer),j(t.resultsView.viewElementId))}),G("focusout",r,function(){this.focusOutTimer=window.setTimeout(function(){R(t)},t.waitBeforeClose)})}}();