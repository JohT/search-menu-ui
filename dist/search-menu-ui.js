var $parcel$global=globalThis,$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire6f19;null==parcelRequire&&((parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var n={id:e,exports:{}};return $parcel$modules[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire6f19=parcelRequire);var parcelRegister=parcelRequire.register;parcelRegister("6Zl5q",function(e,t){"use strict";var n=n||{};(n.exports={}).getEventTarget=function(e){if(void 0!==e.currentTarget&&null!=e.currentTarget)return e.currentTarget;if(void 0!==e.srcElement&&null!=e.srcElement)return e.srcElement;throw Error("Event doesn't contain bounded element: "+e)}}),parcelRegister("e8zLT",function(e,t){"use strict";var n=n||{};(n.exports={}).moveCursorToEndOf=function(e){if("function"==typeof e.setSelectionRange)e.setSelectionRange(e.value.length,e.value.length);else if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd)e.selectionStart=e.selectionEnd=e.value.length;else if("function"==typeof e.createTextRange){var t=e.createTextRange();t.collapse(!0),t.moveEnd("character",e.value.length),t.moveStart("character",e.value.length),t.select()}}}),parcelRegister("lTEEA",function(e,t){"use strict";var n=n||{};(n.exports={}).addEventListener=function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}});var $85319350d303889b$var$module=$85319350d303889b$var$datarestructorInternalCreateIfNotExists($85319350d303889b$var$module);function $85319350d303889b$var$datarestructorInternalCreateIfNotExists(e){return e||{}}var $85319350d303889b$var$searchmenu=$85319350d303889b$var$module.exports={};$85319350d303889b$var$searchmenu.internalCreateIfNotExists=$85319350d303889b$var$datarestructorInternalCreateIfNotExists;var $85319350d303889b$var$eventtarget=$85319350d303889b$var$eventtarget||parcelRequire("6Zl5q"),$85319350d303889b$var$selectionrange=$85319350d303889b$var$selectionrange||parcelRequire("e8zLT"),$85319350d303889b$var$eventlistener=$85319350d303889b$var$eventlistener||parcelRequire("lTEEA");$85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder=function(){"use strict";function e(e){return"string"==typeof e&&null!=e&&""!=e}return function(t){var n="{{displayName}}: {{value}}",r="{{summaries[0].displayName}}: {{summaries[0].value}}",i="{{view.listEntryElementIdPrefix}} {{category}}";this.description={viewElementId:t?t.viewElementId:"",listParentElementId:t?t.listParentElementId:"",listEntryElementIdPrefix:t?t.listEntryElementIdPrefix:"",listEntryElementTag:t?t.listEntryElementTag:"li",listEntryTextTemplate:t?t.listEntryTextTemplate:n,listEntrySummaryTemplate:t?t.listEntrySummaryTemplate:r,listEntryStyleClassTemplate:t?t.listEntryStyleClassTemplate:i,isSelectableFilterOption:!!t&&t.isSelectableFilterOption},this.viewElementId=function(t){var n;return this.description.viewElementId=e(n=t)?n:"",this},this.listParentElementId=function(t){var n;return this.description.listParentElementId=e(n=t)?n:"",this},this.listEntryElementIdPrefix=function(t){var n;return this.description.listEntryElementIdPrefix=e(n=t)?n:"",this},this.listEntryElementTag=function(t){var n;return this.description.listEntryElementTag=e(n=t)?n:"li",this},this.listEntryTextTemplate=function(t){var r,i;return this.description.listEntryTextTemplate=(r=t,i=n,e(r)?r:i),this},this.listEntrySummaryTemplate=function(t){var n,i;return this.description.listEntrySummaryTemplate=(n=t,i=r,e(n)?n:i),this},this.listEntryStyleClassTemplate=function(t){var n,r;return this.description.listEntryStyleClassTemplate=(n=t,r=i,e(n)?n:r),this},this.isSelectableFilterOption=function(e){return this.description.isSelectableFilterOption=!0===e,this},this.build=function(){return this.description}}}(),$85319350d303889b$var$searchmenu.SearchMenuAPI=function(){"use strict";function e(e,t,n){$85319350d303889b$var$eventlistener.addEventListener(e,t,n)}function t(e){return $85319350d303889b$var$eventtarget.getEventTarget(e)}function n(e,t){var n=RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function r(e){return"string"==typeof e&&null!=e&&""!=e}return function(){this.config={triggerSearch:function(){throw Error("search service needs to be defined.")},convertData:function(e){return e},resolveTemplate:function(){throw Error("template resolver needs to be defined.")},addPredefinedParametersTo:function(){},onCreatedElement:function(){},navigateTo:function(e){window.location.href=e},createdElementListeners:[],searchAreaElementId:"searcharea",inputElementId:"searchinputtext",searchTextParameterName:"searchtext",resultsView:new $85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder().viewElementId("searchresults").listParentElementId("searchmatches").listEntryElementIdPrefix("result").listEntryTextTemplate("{{abbreviation}} {{displayName}}").listEntrySummaryTemplate("{{summaries[0].abbreviation}} <b>{{summaries[1].value}}</b><br>{{summaries[2].value}}: {{summaries[0].value}}").build(),detailView:new $85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder().viewElementId("searchdetails").listParentElementId("searchdetailentries").listEntryElementIdPrefix("detail").listEntryTextTemplate("<b>{{displayName}}:</b> {{value}}").build(),filterOptionsView:new $85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder().viewElementId("searchfilteroptions").listParentElementId("searchfilteroptionentries").listEntryElementIdPrefix("filter").listEntryTextTemplate("{{value}}").listEntrySummaryTemplate("{{summaries[0].value}}").isSelectableFilterOption(!0).build(),filtersView:new $85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder().viewElementId("searchresults").listParentElementId("searchfilters").listEntryElementIdPrefix("filter").isSelectableFilterOption(!0).build(),waitBeforeClose:700,waitBeforeSearch:500,waitBeforeMouseOver:700},this.searchService=function(e){return this.config.triggerSearch=e,this},this.dataConverter=function(e){return this.config.convertData=e,this},this.templateResolver=function(e){return this.config.resolveTemplate=e,this},this.addPredefinedParametersTo=function(e){return this.config.addPredefinedParametersTo=e,this},this.setElementCreatedHandler=function(e){return this.config.onCreatedElement=e,this},this.addElementCreatedHandler=function(e){return this.config.createdElementListeners.push(e),this},this.addFocusStyleClassOnEveryCreatedElement=function(i){var l,a=r(l=i)?l:"focus";return this.addElementCreatedHandler(function(r,i){i&&(e("focus",r,function(e){var r,i,l;n(r=a,i=t(e)),l=i.className.length>0?" ":"",i.className+=l+r}),e("blur",r,function(e){n(a,t(e))}))}),this},this.searchAreaElementId=function(e){var t;return this.config.searchAreaElementId=r(t=e)?t:"searcharea",this},this.inputElementId=function(e){var t;return this.config.inputElementId=r(t=e)?t:"searchinputtext",this},this.searchTextParameterName=function(e){var t;return this.config.searchTextParameterName=r(t=e)?t:"searchtext",this},this.resultsView=function(e){return this.config.resultsView=e,this},this.detailView=function(e){return this.config.detailView=e,this},this.filterOptionsView=function(e){return this.config.filterOptionsView=e,this},this.filtersView=function(e){return this.config.filtersView=e,this},this.waitBeforeClose=function(e){return this.config.waitBeforeClose=e,this},this.waitBeforeSearch=function(e){return this.config.waitBeforeSearch=e,this},this.waitBeforeMouseOver=function(e){return this.config.waitBeforeMouseOver=e,this},this.start=function(){var e=this.config;return e.createdElementListeners.length>0&&this.setElementCreatedHandler(function(t,n){var r=0;for(r=0;r<e.createdElementListeners.length;r+=1)e.createdElementListeners[r](t,n)}),new $85319350d303889b$var$searchmenu.SearchMenuUI(e)}}}(),$85319350d303889b$var$searchmenu.SearchMenuUI=function(){"use strict";function e(e){return function(t,n){var r;for(r=0;r<e.length;r+=1)if(t[e[r]]!=n[e[r]])return!1;return!0}}function t(e,t){U(e,r(t,o)),q(e,r(t,u)),F(e,r(t,a)),J(e,r(t,w))}function n(e,t){Y("mousedown",e,t),H(e,t)}function r(e,t){return function(n){t(n,e)}}function i(e,t,n){return function(r){n(r,e,t)}}function l(e){var t=e.split("--");t.length<2&&console.log("expected at least one '--' separator inside the id "+e);var n=t[0],r=parseInt(t[1]),i=t[t.length-2],l=parseInt(t[t.length-1]),a=e.substring(0,e.lastIndexOf(l)-2);return{id:e,type:i,index:l,previousId:a+"--"+(l-1),nextId:a+"--"+(l+1),firstId:a+"--1",lastId:a+"--"+document.getElementById(e).parentElement.childNodes.length,mainMenuId:n+"--"+r,mainMenuIndex:r,hiddenFieldsId:e+"--fields",isFirstElement:l<=1,isSubMenu:t.length>3,subMenuId:function(t){return e+"--"+t+"--1"},replaceMainMenuIndex:function(t){return n+"--"+t+e.substring(this.mainMenuId.length)},getNewIndexAfterRemovedMainMenuIndex:function(t){if(r<t)return e;if(r==t)throw Error("index "+t+" should had been removed.");return this.replaceMainMenuIndex(r-1)},hiddenFields:function(){var t=document.getElementById(e+"--fields");return JSON.parse(h(t,"textContent",t.innerText))}}}function a(e,t){var n=Z(e),r=document.getElementById(t.inputElementId);return n.blur(),r.focus(),$85319350d303889b$var$selectionrange.moveCursorToEndOf(r),I(e),C(t),r}function s(e,t){var n=Z(e),r=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1");r&&(n.blur(),r.focus())}function o(e,t){c(e,function(e){var n=null;return e.type===t.resultsView.listEntryElementIdPrefix&&(n=document.getElementById(t.filterOptionsView.listEntryElementIdPrefix+"--1")),null===n&&(n=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1")),n}),C(t)}function u(e,t){d(e,function(n){var r=null;if(n.type===t.filterOptionsView.listEntryElementIdPrefix){var i=S(t.resultsView.listEntryElementIdPrefix);r=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--"+i)}return null===r?a(e,t):r}),C(t)}function c(e,t){var n=Z(e),r=l(n.id);r.isSubMenu&&I(e);var i=document.getElementById(r.nextId);null==i&&"function"==typeof t&&(i=t(r)),null==i&&(i=document.getElementById(r.firstId)),null!=i&&(n.blur(),i.focus())}function d(e,t){var n=Z(e),r=l(n.id);r.isSubMenu&&I(e);var i=document.getElementById(r.previousId);null==i&&"function"==typeof t&&(i=t(r)),null==i&&(i=document.getElementById(r.lastId)),null!=i&&(n.blur(),i.focus())}function f(t,n,i){(function(e,t,n){var i,l,a,s,o;A(e,$),l=e,a=i=r(n,T),Y("keydown",l,function(e){("Del"==e.key||"Delete"==e.key||46==_(e))&&a(e)}),s=e,o=i,Y("keydown",s,function(e){("Backspace"==e.key||8==_(e))&&o(e)})})(m(function(e,t,n){var r,i,a=l(e).hiddenFields();for(r=0;r<t.length;r+=1)if(n(i=t[r],a))return i;return console.log("error: no selected entry found for id "+e+" in "+t),null}(Z(t).id,n,e(["fieldName","value"])),n,i.filtersView,i),0,i),I(t),g(t)}function m(e,n,r,a){var s,o,u,c,d,f,m,E=S(r.listEntryElementIdPrefix),y=r.listEntryElementIdPrefix+"--"+(E+1),g=(s=h(e,"category",""),o=e.fieldName,u=r.listParentElementId,c=null,null!=(d=v(u,function(e){var t=l(e.id).hiddenFields();if(t.fieldName===o){var n=h(t,"category","");if(""===n)c=e;else if(n===s)return e}}))?d:c);if(null!=g){var w,I=B(e,r,g.id,a.resolveTemplate);return(w=g).innerHTML=I,g=w}var $=B(e,r,y,a.resolveTemplate);return g=P(e,r,y,$),R(N(e,r,a.resolveTemplate),g),b(g,a.onCreatedElement),Y("mousedown",f=g,m=i(n,a,p)),H(f,m),z(f,m),t(g,a),g}function h(e,t,n){return void 0===e[t]?n:e[t]}function v(e,t){var n,r,i=document.getElementById(e);for(n=0;n<i.childNodes.length;n+=1)if(r=t(i.childNodes[n]))return r;return null}function E(e,t,n){C(n),y(e,t,n.detailView,n),I(e)}function p(e,t,n){C(n),y(e,t,n.filterOptionsView,n)}function y(e,t,n,r){var l,a=n.listParentElementId,s=document.getElementById(a);if("function"==typeof s.cloneNode&&"function"==typeof s.replaceChild){var o=s.cloneNode(!1);s.parentNode.replaceChild(o,s)}else s.innerHTML="";var u,m,h,v,E=Z(e),p=null,y=null,w=0,I=E.id+"--"+n.listEntryElementIdPrefix,$=null;for(w=0;w<t.length;w+=1)p=t[w],I=E.id+"--"+n.listEntryElementIdPrefix+"--"+(w+1),v=B(p,n,I,r.resolveTemplate),y=P(p,n,I,v),R(N(p,n,r.resolveTemplate),y),b(y,r.onCreatedElement),n.isSelectableFilterOption&&(U(u=y,c),q(u,d),J(u,g),F(u,g),Y("mousedown",m=y,h=i(t,r,f)),H(m,h),A(m,h)),0===w&&($=y);var T=M(E,function(e){return"DIV"==e.tagName}),x=document.getElementById(n.viewElementId),S=T.offsetWidth+15,V=(void 0!==(l=E.getBoundingClientRect()).y?l.y:l.top)+(void 0!==window.pageYOffset?window.pageYOffset:"CSS1Compat"===(document.compatMode||"")?document.documentElement.scrollTop:document.body.scrollTop);x.style.left=S+"px",x.style.top=V+"px",R("show",x),n.isSelectableFilterOption&&(E.blur(),$.focus())}function g(e){var t,n=Z(e),r=l(n.id),i=document.getElementById(r.mainMenuId);n.blur(),i.focus(),null!=(t=M(n,function(e){return D("show",e)}))&&function(e){L("show",e)}(t)}function w(e,t){C(t)}function I(e){void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1}function $(e){var t,n;I(e),D(t="inactive",n=Z(e))?L(t,n):R(t,n)}function T(e,t){var n,r,i;I(e),u(e,t),r=(n=Z(e)).parentElement,i=l(n.id).mainMenuIndex,r.removeChild(n),function e(t,n,r,i){!(n>r)&&t.childNodes&&x(t.childNodes,function(t){i(t),e(t,n+1,r,i)})}(r,0,5,function(e){e.id&&(e.id=l(e.id).getNewIndexAfterRemovedMainMenuIndex(i))})}function b(e,t){e.id&&t(e,!0),x(e.childNodes,function(e){e.id&&t(e,!1)})}function x(e,t){var n=0;for(n=0;n<e.length;n+=1)t(e[n],n+1)}function S(e){var t=document.getElementById(e+"--1");return null===t?0:t.parentElement.childNodes.length}function P(e,t,n,r){var i,l,a,s,o=(i=r,l=n,a=t.listEntryElementTag,(s=document.createElement(a)).id=l,s.tabIndex="0",s.innerHTML=i,s);return document.getElementById(t.listParentElementId).appendChild(o),o}function B(e,t,n,r){var i=r(t.listEntryTextTemplate,e);return void 0!==e.summaries&&(i=r(t.listEntrySummaryTemplate,e)),i+='<p id="'+n+'--fields" style="display: none">'+JSON.stringify(e)+"</p>"}function N(e,t,n){var r=n(t.listEntryStyleClassTemplate,e);return n(r,{view:t})}function V(e){k(e.resultsView.viewElementId),k(e.detailView.viewElementId),k(e.filterOptionsView.viewElementId)}function C(e){k(e.detailView.viewElementId),k(e.filterOptionsView.viewElementId)}function O(e){R("show",document.getElementById(e))}function k(e){L("show",document.getElementById(e))}function M(e,t){for(var n=e;null!=n;){if(t(n))return n;n=n.parentNode}return null}function R(e,t){L(e,t);var n=t.className.length>0?" ":"";t.className+=n+e}function L(e,t){var n=RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function D(e,t){return null!=t.className&&t.className.indexOf(e)>=0}function F(e,t){Y("keydown",e,function(e){("Escape"==e.key||"Esc"==e.key||27==_(e))&&t(e)})}function H(e,t){Y("keydown",e,function(e){("Enter"==e.key||13==_(e))&&t(e)})}function A(e,t){Y("keydown",e,function(e){(" "==e.key||"Spacebar"==e.key||32==_(e))&&t(e)})}function q(e,t){Y("keydown",e,function(e){("ArrowUp"==e.key||"Up"==e.key||38==_(e))&&t(e)})}function U(e,t){Y("keydown",e,function(e){("ArrowDown"==e.key||"Down"==e.key||40==_(e))&&t(e)})}function z(e,t){Y("keydown",e,function(e){("ArrowRight"==e.key||"Right"==e.key||39==_(e))&&t(e)})}function J(e,t){Y("keydown",e,function(e){("ArrowLeft"==e.key||"Left"==e.key||37==_(e))&&t(e)})}function Y(e,t,n){$85319350d303889b$var$eventlistener.addEventListener(e,t,n)}function Z(e){return $85319350d303889b$var$eventtarget.getEventTarget(e)}function _(e){return void 0===e.keyCode?-1:e.keyCode}return function(a){this.config=a,this.currentSearchText="",this.focusOutTimer=null,this.waitBeforeSearchTimer=null;var o=document.getElementById(a.inputElementId);F(o,function(e){Z(e).value="",V(a)}),U(o,r(a,s)),Y("keyup",o,function(r){null!==this.waitBeforeSearchTimer&&clearTimeout(this.waitBeforeSearchTimer);var s=Z(r).value;this.waitBeforeSearchTimer=window.setTimeout(function(){(s!==this.currentSearchText||""===this.currentSearchText)&&(function(r,a){var s,o,u,c,d;if(document.getElementById(a.resultsView.listParentElementId).innerHTML="",0===r.length)return V(a);O(a.resultsView.viewElementId),s=r,(d=(u=(o=a).filtersView.listParentElementId,c={},v(u,function(e){var t=l(e.id).hiddenFields();if(void 0===t.fieldName||void 0===t.value||D("inactive",e))return null;c[t.fieldName]=t.value}),c))[o.searchTextParameterName]=s,o.addPredefinedParametersTo(d),o.triggerSearch(d,function(r){var a=o.convertData(r),s=o,u=0;for(u=0;u<a.length;u+=1)!function(r,a,s){var o=s.resultsView.listEntryElementIdPrefix+"--"+a,u=B(r,s.resultsView,o,s.resolveTemplate),c=P(r,s.resultsView,o,u);if(R(N(r,s.resultsView,s.resolveTemplate),c),b(c,s.onCreatedElement),void 0!==r.details&&(A(d=c,f=i(r.details,s,E)),z(d,f),function(e,t,n){Y("mouseover",e,function(r){this.originalEvent=function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],l=e[i];t[i]=l}return t}(r),this.delayedHandlerTimer=window.setTimeout(function(){n(void 0!==this.originalEvent?this.originalEvent:r)},t),this.preventEventHandling=function(){null!==this.delayedHandlerTimer&&clearTimeout(this.delayedHandlerTimer)},Y("mouseout",e,this.preventEventHandling),Y("mousedown",e,this.preventEventHandling),Y("keydown",e,this.preventEventHandling)})}(c,s.waitBeforeMouseOver,i(r.details,s,E)),n(c,function(){var e=function(e,t){return v(e,function(e){var n=l(e.id).hiddenFields(),r=h(n,"urltemplate",[""])[0];if(""===r)return null;var i=h(n,t,"");return i!=t&&""!==i||D("inactive",e)?null:r.value})}(s.filtersView.listParentElementId,h(r,"category",""));if(e){var t=s.resolveTemplate(e,r);s.navigateTo(t)}})),void 0!==r.options){var d,f,y,g,w=r.options;void 0!==r.default&&(w=function(e,t,n){if(!t)return e;var r,i=!1;for(r=0;r<e.length;r+=1)if(n(e[r],t)){i=!0;break}if(i)return e;var l=[];for(l.push(t),r=0;r<e.length;r+=1)l.push(e[r]);return l}(r.options,r.default[0],e(["value"])),A(m(r.default[0],w,s.filtersView,s),i(w,s,p))),A(y=c,g=i(r.options,s,p)),z(y,g),n(c,i(r.options,s,p))}t(c,s)}(a[u],u+1,s)})}(s,a),this.currentSearchText=s)},a.waitBeforeSearch)});var u=document.getElementById(a.searchAreaElementId);Y("focusin",u,function(){""!==document.getElementById(a.inputElementId).value&&(null!=this.focusOutTimer&&clearTimeout(this.focusOutTimer),O(a.resultsView.viewElementId))}),Y("focusout",u,function(){this.focusOutTimer=window.setTimeout(function(){V(a)},a.waitBeforeClose)})}}();
//# sourceMappingURL=search-menu-ui.js.map
