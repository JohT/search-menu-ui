var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},i=e.parcelRequire6f19;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,i.call(r.exports,r,r.exports),r.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},e.parcelRequire6f19=i),i.register("frt1r",(function(e,t){"use strict";var n=n||{};(n.exports={}).getEventTarget=function(e){if(void 0!==e.currentTarget&&null!=e.currentTarget)return e.currentTarget;if(void 0!==e.srcElement&&null!=e.srcElement)return e.srcElement;throw new Error("Event doesn't contain bounded element: "+e)}})),i.register("jp72d",(function(e,t){"use strict";var n=n||{};(n.exports={}).moveCursorToEndOf=function(e){if("function"==typeof e.setSelectionRange)e.setSelectionRange(e.value.length,e.value.length);else if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd)e.selectionStart=e.selectionEnd=e.value.length;else if("function"==typeof e.createTextRange){var t=e.createTextRange();t.collapse(!0),t.moveEnd("character",e.value.length),t.moveStart("character",e.value.length),t.select()}}})),i.register("28Ous",(function(e,t){"use strict";var n=n||{};(n.exports={}).addEventListener=function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}}));var r=l(r);function l(e){return e||{}}var o=r.exports={};o.internalCreateIfNotExists=l;var s=s||i("frt1r"),u=u||i("jp72d"),a=a||i("28Ous");o.SearchViewDescriptionBuilder=function(){"use strict";function e(e,t){return function(e){return"string"==typeof e&&null!=e&&""!=e}(e)?e:t}return function(t){var n="{{displayName}}: {{value}}",i="{{summaries[0].displayName}}: {{summaries[0].value}}",r="{{view.listEntryElementIdPrefix}} {{category}}";this.description={viewElementId:t?t.viewElementId:"",listParentElementId:t?t.listParentElementId:"",listEntryElementIdPrefix:t?t.listEntryElementIdPrefix:"",listEntryElementTag:t?t.listEntryElementTag:"li",listEntryTextTemplate:t?t.listEntryTextTemplate:n,listEntrySummaryTemplate:t?t.listEntrySummaryTemplate:i,listEntryStyleClassTemplate:t?t.listEntryStyleClassTemplate:r,isSelectableFilterOption:!!t&&t.isSelectableFilterOption},this.viewElementId=function(t){return this.description.viewElementId=e(t,""),this},this.listParentElementId=function(t){return this.description.listParentElementId=e(t,""),this},this.listEntryElementIdPrefix=function(t){return this.description.listEntryElementIdPrefix=e(t,""),this},this.listEntryElementTag=function(t){return this.description.listEntryElementTag=e(t,"li"),this},this.listEntryTextTemplate=function(t){return this.description.listEntryTextTemplate=e(t,n),this},this.listEntrySummaryTemplate=function(t){return this.description.listEntrySummaryTemplate=e(t,i),this},this.listEntryStyleClassTemplate=function(t){return this.description.listEntryStyleClassTemplate=e(t,r),this},this.isSelectableFilterOption=function(e){return this.description.isSelectableFilterOption=!0===e,this},this.build=function(){return this.description}}}(),o.SearchMenuAPI=function(){"use strict";function e(e,t,n){a.addEventListener(e,t,n)}function t(e){return s.getEventTarget(e)}function n(e,t){var n=new RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function i(e,t){return function(e){return"string"==typeof e&&null!=e&&""!=e}(e)?e:t}return function(){this.config={triggerSearch:function(){throw new Error("search service needs to be defined.")},convertData:function(e){return e},resolveTemplate:function(){throw new Error("template resolver needs to be defined.")},addPredefinedParametersTo:function(){},onCreatedElement:function(){},navigateTo:function(e){window.location.href=e},createdElementListeners:[],searchAreaElementId:"searcharea",inputElementId:"searchinputtext",searchTextParameterName:"searchtext",resultsView:(new o.SearchViewDescriptionBuilder).viewElementId("searchresults").listParentElementId("searchmatches").listEntryElementIdPrefix("result").listEntryTextTemplate("{{abbreviation}} {{displayName}}").listEntrySummaryTemplate("{{summaries[0].abbreviation}} <b>{{summaries[1].value}}</b><br>{{summaries[2].value}}: {{summaries[0].value}}").build(),detailView:(new o.SearchViewDescriptionBuilder).viewElementId("searchdetails").listParentElementId("searchdetailentries").listEntryElementIdPrefix("detail").listEntryTextTemplate("<b>{{displayName}}:</b> {{value}}").build(),filterOptionsView:(new o.SearchViewDescriptionBuilder).viewElementId("searchfilteroptions").listParentElementId("searchfilteroptionentries").listEntryElementIdPrefix("filter").listEntryTextTemplate("{{value}}").listEntrySummaryTemplate("{{summaries[0].value}}").isSelectableFilterOption(!0).build(),filtersView:(new o.SearchViewDescriptionBuilder).viewElementId("searchresults").listParentElementId("searchfilters").listEntryElementIdPrefix("filter").isSelectableFilterOption(!0).build(),waitBeforeClose:700,waitBeforeSearch:500,waitBeforeMouseOver:700},this.searchService=function(e){return this.config.triggerSearch=e,this},this.dataConverter=function(e){return this.config.convertData=e,this},this.templateResolver=function(e){return this.config.resolveTemplate=e,this},this.addPredefinedParametersTo=function(e){return this.config.addPredefinedParametersTo=e,this},this.setElementCreatedHandler=function(e){return this.config.onCreatedElement=e,this},this.addElementCreatedHandler=function(e){return this.config.createdElementListeners.push(e),this},this.addFocusStyleClassOnEveryCreatedElement=function(r){var l=i(r,"focus");return this.addElementCreatedHandler((function(i,r){r&&(e("focus",i,(function(e){!function(e,t){n(e,t);var i=t.className.length>0?" ":"";t.className+=i+e}(l,t(e))})),e("blur",i,(function(e){n(l,t(e))})))})),this},this.searchAreaElementId=function(e){return this.config.searchAreaElementId=i(e,"searcharea"),this},this.inputElementId=function(e){return this.config.inputElementId=i(e,"searchinputtext"),this},this.searchTextParameterName=function(e){return this.config.searchTextParameterName=i(e,"searchtext"),this},this.resultsView=function(e){return this.config.resultsView=e,this},this.detailView=function(e){return this.config.detailView=e,this},this.filterOptionsView=function(e){return this.config.filterOptionsView=e,this},this.filtersView=function(e){return this.config.filtersView=e,this},this.waitBeforeClose=function(e){return this.config.waitBeforeClose=e,this},this.waitBeforeSearch=function(e){return this.config.waitBeforeSearch=e,this},this.waitBeforeMouseOver=function(e){return this.config.waitBeforeMouseOver=e,this},this.start=function(){var e=this.config;return e.createdElementListeners.length>0&&this.setElementCreatedHandler((function(t,n){var i=0;for(i=0;i<e.createdElementListeners.length;i+=1)e.createdElementListeners[i](t,n)})),new o.SearchMenuUI(e)}}}(),o.SearchMenuUI=function(){"use strict";function e(e,l,o){var s,u,a,c=o.resultsView.listEntryElementIdPrefix+"--"+l,m=L(e,o.resultsView,c,o.resolveTemplate),h=F(e,o.resultsView,c,m);if(_(H(e,o.resultsView,o.resolveTemplate),h),k(h,o.onCreatedElement),function(e){return void 0!==e.details}(e)&&(i(h,d(e.details,o,x)),s=h,u=o.waitBeforeMouseOver,a=d(e.details,o,x),te("mouseover",s,(function(e){this.originalEvent=function(e){for(var t={},n=Object.keys(e),i=0;i<n.length;i++){var r=n[i],l=e[r];t[r]=l}return t}(e),this.delayedHandlerTimer=window.setTimeout((function(){a(void 0!==this.originalEvent?this.originalEvent:e)}),u),this.preventEventHandling=function(){null!==this.delayedHandlerTimer&&clearTimeout(this.delayedHandlerTimer)},te("mouseout",s,this.preventEventHandling),te("mousedown",s,this.preventEventHandling),te("keydown",s,this.preventEventHandling)})),r(h,(function(){var t,n,i=(t=o.filtersView.listParentElementId,n=I(e,"category",""),T(t,(function(e){var t=f(e.id).hiddenFields(),i=I(t,"urltemplate",[""])[0];if(""===i)return null;var r=I(t,n,"");return r!=n&&""!==r||z("inactive",e)?null:i.value})));if(i){var r=o.resolveTemplate(i,e);o.navigateTo(r)}}))),function(e){return void 0!==e.options}(e)){var E=e.options;if(function(e){return void 0!==e.default}(e))E=function(e,t,n){if(!t)return e;var i,r=!1;for(i=0;i<e.length;i+=1)if(n(e[i],t)){r=!0;break}if(r)return e;var l=[];for(l.push(t),i=0;i<e.length;i+=1)l.push(e[i]);return l}(e.options,e.default[0],t(["value"])),function(e,t,n){Q(e,d(t,n,S))}(w(e.default[0],E,o.filtersView,o),E,o);i(h,d(e.options,o,S)),r(h,d(e.options,o,S))}n(h,o)}function t(e){return function(t,n){var i;for(i=0;i<e.length;i+=1)if(t[e[i]]!=n[e[i]])return!1;return!0}}function n(e,t){Z(e,c(t,E)),X(e,c(t,v)),G(e,c(t,m)),ee(e,c(t,B))}function i(e,t){Q(e,t),$(e,t)}function r(e,t){te("mousedown",e,t),K(e,t)}function l(e,t){te("mousedown",e,t),K(e,t),Q(e,t)}function o(e,t){!function(e,t){te("keydown",e,(function(e){"Del"!=e.key&&"Delete"!=e.key&&46!=ie(e)||t(e)}))}(e,t),function(e,t){te("keydown",e,(function(e){"Backspace"!=e.key&&8!=ie(e)||t(e)}))}(e,t)}function c(e,t){return function(n){t(n,e)}}function d(e,t,n){return function(i){n(i,e,t)}}function f(e){var t="--",n=e.split(t);n.length<2&&console.log("expected at least one '--' separator inside the id "+e);var i=n[0],r=parseInt(n[1]),l=n[n.length-2],o=parseInt(n[n.length-1]),s=e.substring(0,e.lastIndexOf(o)-t.length);return{id:e,type:l,index:o,previousId:s+t+(o-1),nextId:s+t+(o+1),firstId:s+t+"1",lastId:s+t+document.getElementById(e).parentElement.childNodes.length,mainMenuId:i+t+r,mainMenuIndex:r,hiddenFieldsId:e+t+"fields",isFirstElement:o<=1,isSubMenu:n.length>3,subMenuId:function(n){return e+t+n+t+"1"},replaceMainMenuIndex:function(n){return i+t+n+e.substring(this.mainMenuId.length)},getNewIndexAfterRemovedMainMenuIndex:function(t){if(r<t)return e;if(r==t)throw new Error("index "+t+" should had been removed.");return this.replaceMainMenuIndex(r-1)},hiddenFields:function(){var n=document.getElementById(e+t+"fields"),i=I(n,"textContent",n.innerText);return JSON.parse(i)}}}function m(e,t){var n=ne(e),i=document.getElementById(t.inputElementId);return n.blur(),i.focus(),u.moveCursorToEndOf(i),V(e),A(t),i}function h(e,t){var n=ne(e),i=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1");i&&(n.blur(),i.focus())}function E(e,t){p(e,(function(e){var n=null;return e.type===t.resultsView.listEntryElementIdPrefix&&(n=document.getElementById(t.filterOptionsView.listEntryElementIdPrefix+"--1")),null===n&&(n=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1")),n})),A(t)}function v(e,t){y(e,(function(n){var i=null;if(n.type===t.filterOptionsView.listEntryElementIdPrefix){var r=D(t.resultsView.listEntryElementIdPrefix);i=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--"+r)}return null===i?m(e,t):i})),A(t)}function p(e,t){var n=ne(e),i=f(n.id);i.isSubMenu&&V(e);var r=document.getElementById(i.nextId);null==r&&"function"==typeof t&&(r=t(i)),null==r&&(r=document.getElementById(i.firstId)),null!=r&&(n.blur(),r.focus())}function y(e,t){var n=ne(e),i=f(n.id);i.isSubMenu&&V(e);var r=document.getElementById(i.previousId);null==r&&"function"==typeof t&&(r=t(i)),null==r&&(r=document.getElementById(i.lastId)),null!=r&&(n.blur(),r.focus())}function g(e,n,i){var r=function(e,t,n){var i,r,l=f(e).hiddenFields();for(i=0;i<t.length;i+=1)if(n(r=t[i],l))return r;return console.log("error: no selected entry found for id "+e+" in "+t),null}(ne(e).id,n,t(["fieldName","value"]));!function(e,t,n){Q(e,N),o(e,c(n,O))}(w(r,n,i.filtersView,i),0,i),V(e),P(e)}function w(e,t,i,r){var l,o,s,u,a,c,m,h,E,v=D(i.listEntryElementIdPrefix),p=i.listEntryElementIdPrefix+"--"+(v+1),y=I(e,"category",""),g=(l=y,o=e.fieldName,s=i.listParentElementId,u=null,a=T(s,(function(e){var t=f(e.id).hiddenFields();if(t.fieldName===o){var n=I(t,"category","");if(""===n)u=e;else if(n===l)return e}})),null!=a?a:u);if(null!=g){var w=L(e,i,g.id,r.resolveTemplate);return m=w,(c=g).innerHTML=m,g=c}return g=F(e,i,p,L(e,i,p,r.resolveTemplate)),_(H(e,i,r.resolveTemplate),g),k(g,r.onCreatedElement),h=g,E=d(t,r,S),te("mousedown",h,E),K(h,E),$(h,E),n(g,r),g}function I(e,t,n){return void 0===e[t]?n:e[t]}function T(e,t){var n,i,r=document.getElementById(e);for(n=0;n<r.childNodes.length;n+=1)if(i=t(r.childNodes[n]))return i;return null}function x(e,t,n){A(n),b(e,t,n.detailView,n),V(e)}function S(e,t,n){A(n),b(e,t,n.filterOptionsView,n)}function b(e,t,n,i){!function(e){var t=document.getElementById(e);if("function"==typeof t.cloneNode&&"function"==typeof t.replaceChild){var n=t.cloneNode(!1);t.parentNode.replaceChild(n,t)}else t.innerHTML=""}(n.listParentElementId);var r,o=ne(e),s=null,u=null,a=0,c=o.id+"--"+n.listEntryElementIdPrefix,f=null;for(a=0;a<t.length;a+=1)u=F(s=t[a],n,c=o.id+"--"+n.listEntryElementIdPrefix+"--"+(a+1),L(s,n,c,i.resolveTemplate)),_(H(s,n,i.resolveTemplate),u),k(u,i.onCreatedElement),n.isSelectableFilterOption&&(Z(r=u,p),X(r,y),ee(r,P),G(r,P),l(u,d(t,i,g))),0===a&&(f=u);var m=J(o,(function(e){return"DIV"==e.tagName})),h=document.getElementById(n.viewElementId),E=m.offsetWidth+15,v=function(e){var t=e.getBoundingClientRect();return void 0!==t.y?t.y:t.top}(o)+(void 0!==window.pageYOffset?window.pageYOffset:"CSS1Compat"===(document.compatMode||"")?document.documentElement.scrollTop:document.body.scrollTop);h.style.left=E+"px",h.style.top=v+"px",j(h),n.isSelectableFilterOption&&(o.blur(),f.focus())}function P(e){var t=ne(e),n=f(t.id),i=document.getElementById(n.mainMenuId);t.blur(),i.focus(),function(e){var t=J(e,(function(e){return z("show",e)}));if(null!=t)Y(t)}(t)}function B(e,t){A(t)}function V(e){void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1}function N(e){V(e);var t,n,i=ne(e);z(t="inactive",n=i)?W(t,n):_(t,n)}function O(e,t){V(e),v(e,t),function(e){var t=ne(e),n=t.parentElement,i=f(t.id).mainMenuIndex;n.removeChild(t),C(n,0,5,(function(e){e.id&&(e.id=f(e.id).getNewIndexAfterRemovedMainMenuIndex(i))}))}(e)}function C(e,t,n,i){t>n||!e.childNodes||M(e.childNodes,(function(e){i(e),C(e,t+1,n,i)}))}function k(e,t){e.id&&t(e,!0),M(e.childNodes,(function(e){e.id&&t(e,!1)}))}function M(e,t){var n=0;for(n=0;n<e.length;n+=1)t(e[n],n+1)}function D(e){var t=document.getElementById(e+"--1");return null===t?0:t.parentElement.childNodes.length}function F(e,t,n,i){var r=function(e,t,n){var i=document.createElement(n);return i.id=t,i.tabIndex="0",i.innerHTML=e,i}(i,n,t.listEntryElementTag);return document.getElementById(t.listParentElementId).appendChild(r),r}function L(e,t,n,i){var r=i(t.listEntryTextTemplate,e);return void 0!==e.summaries&&(r=i(t.listEntrySummaryTemplate,e)),r+='<p id="'+n+'--fields" style="display: none">'+JSON.stringify(e)+"</p>"}function H(e,t,n){var i=n(t.listEntryStyleClassTemplate,e);return i=n(i,{view:t})}function R(e){q(e.resultsView.viewElementId),q(e.detailView.viewElementId),q(e.filterOptionsView.viewElementId)}function A(e){q(e.detailView.viewElementId),q(e.filterOptionsView.viewElementId)}function U(e){j(document.getElementById(e))}function j(e){_("show",e)}function q(e){Y(document.getElementById(e))}function J(e,t){for(var n=e;null!=n;){if(t(n))return n;n=n.parentNode}return null}function Y(e){W("show",e)}function _(e,t){W(e,t);var n=t.className.length>0?" ":"";t.className+=n+e}function W(e,t){var n=new RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function z(e,t){return null!=t.className&&t.className.indexOf(e)>=0}function G(e,t){te("keydown",e,(function(e){"Escape"!=e.key&&"Esc"!=e.key&&27!=ie(e)||t(e)}))}function K(e,t){te("keydown",e,(function(e){"Enter"!=e.key&&13!=ie(e)||t(e)}))}function Q(e,t){te("keydown",e,(function(e){" "!=e.key&&"Spacebar"!=e.key&&32!=ie(e)||t(e)}))}function X(e,t){te("keydown",e,(function(e){"ArrowUp"!=e.key&&"Up"!=e.key&&38!=ie(e)||t(e)}))}function Z(e,t){te("keydown",e,(function(e){"ArrowDown"!=e.key&&"Down"!=e.key&&40!=ie(e)||t(e)}))}function $(e,t){te("keydown",e,(function(e){"ArrowRight"!=e.key&&"Right"!=e.key&&39!=ie(e)||t(e)}))}function ee(e,t){te("keydown",e,(function(e){"ArrowLeft"!=e.key&&"Left"!=e.key&&37!=ie(e)||t(e)}))}function te(e,t,n){a.addEventListener(e,t,n)}function ne(e){return s.getEventTarget(e)}function ie(e){return void 0===e.keyCode?-1:e.keyCode}return function(t){this.config=t,this.currentSearchText="",this.focusOutTimer=null,this.waitBeforeSearchTimer=null;var n=document.getElementById(t.inputElementId);G(n,(function(e){ne(e).value="",R(t)})),Z(n,c(t,h)),te("keyup",n,(function(n){null!==this.waitBeforeSearchTimer&&clearTimeout(this.waitBeforeSearchTimer);var i=ne(n).value;this.waitBeforeSearchTimer=window.setTimeout((function(){i===this.currentSearchText&&""!==this.currentSearchText||(!function(t,n){var i=document.getElementById(n.resultsView.listParentElementId);if(i.innerHTML="",0===t.length)return void R(n);U(n.resultsView.viewElementId),function(t,n){var i=(r=n.filtersView.listParentElementId,l={},T(r,(function(e){var t=f(e.id).hiddenFields();return void 0===t.fieldName||void 0===t.value||z("inactive",e)?null:void(l[t.fieldName]=t.value)})),l);var r,l;i[n.searchTextParameterName]=t,n.addPredefinedParametersTo(i),n.triggerSearch(i,(function(t){!function(t,n){var i=0;for(i=0;i<t.length;i+=1)e(t[i],i+1,n)}(n.convertData(t),n)}))}(t,n)}(i,t),this.currentSearchText=i)}),t.waitBeforeSearch)}));var i=document.getElementById(t.searchAreaElementId);te("focusin",i,(function(){""!==document.getElementById(t.inputElementId).value&&(null!=this.focusOutTimer&&clearTimeout(this.focusOutTimer),U(t.resultsView.viewElementId))})),te("focusout",i,(function(){this.focusOutTimer=window.setTimeout((function(){R(t)}),t.waitBeforeClose)}))}}();
//# sourceMappingURL=search-menu-ui.js.map
