var $parcel$global=globalThis,$parcel$modules={},$parcel$inits={},parcelRequire=$parcel$global.parcelRequire6f19;null==parcelRequire&&((parcelRequire=function(e){if(e in $parcel$modules)return $parcel$modules[e].exports;if(e in $parcel$inits){var t=$parcel$inits[e];delete $parcel$inits[e];var n={id:e,exports:{}};return $parcel$modules[e]=n,t.call(n.exports,n,n.exports),n.exports}var r=Error("Cannot find module '"+e+"'");throw r.code="MODULE_NOT_FOUND",r}).register=function(e,t){$parcel$inits[e]=t},$parcel$global.parcelRequire6f19=parcelRequire);var parcelRegister=parcelRequire.register;parcelRegister("6Zl5q",function(e,t){"use strict";var n=n||{};(n.exports={}).getEventTarget=function(e){if(void 0!==e.currentTarget&&null!=e.currentTarget)return e.currentTarget;if(void 0!==e.srcElement&&null!=e.srcElement)return e.srcElement;throw Error("Event doesn't contain bounded element: "+e)}}),parcelRegister("e8zLT",function(e,t){"use strict";var n=n||{};(n.exports={}).moveCursorToEndOf=function(e){if("function"==typeof e.setSelectionRange)e.setSelectionRange(e.value.length,e.value.length);else if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd)e.selectionStart=e.selectionEnd=e.value.length;else if("function"==typeof e.createTextRange){var t=e.createTextRange();t.collapse(!0),t.moveEnd("character",e.value.length),t.moveStart("character",e.value.length),t.select()}}}),parcelRegister("lTEEA",function(e,t){"use strict";var n=n||{};(n.exports={}).addEventListener=function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}});var $85319350d303889b$var$module=$85319350d303889b$var$datarestructorInternalCreateIfNotExists($85319350d303889b$var$module);function $85319350d303889b$var$datarestructorInternalCreateIfNotExists(e){return e||{}}var $85319350d303889b$var$searchmenu=$85319350d303889b$var$module.exports={};$85319350d303889b$var$searchmenu.internalCreateIfNotExists=$85319350d303889b$var$datarestructorInternalCreateIfNotExists;var $85319350d303889b$var$eventtarget=$85319350d303889b$var$eventtarget||parcelRequire("6Zl5q"),$85319350d303889b$var$selectionrange=$85319350d303889b$var$selectionrange||parcelRequire("e8zLT"),$85319350d303889b$var$eventlistener=$85319350d303889b$var$eventlistener||parcelRequire("lTEEA");$85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder=function(){"use strict";function e(e){return"string"==typeof e&&null!=e&&""!=e}return function(t){var n="{{displayName}}: {{value}}",r="{{summaries[0].displayName}}: {{summaries[0].value}}",i="{{view.listEntryElementIdPrefix}} {{category}}";this.description={viewElementId:t?t.viewElementId:"",listParentElementId:t?t.listParentElementId:"",listEntryElementIdPrefix:t?t.listEntryElementIdPrefix:"",listEntryElementTag:t?t.listEntryElementTag:"li",listEntryTextTemplate:t?t.listEntryTextTemplate:n,listEntrySummaryTemplate:t?t.listEntrySummaryTemplate:r,listEntryStyleClassTemplate:t?t.listEntryStyleClassTemplate:i,isSelectableFilterOption:!!t&&t.isSelectableFilterOption},this.viewElementId=function(t){var n;return this.description.viewElementId=e(n=t)?n:"",this},this.listParentElementId=function(t){var n;return this.description.listParentElementId=e(n=t)?n:"",this},this.listEntryElementIdPrefix=function(t){var n;return this.description.listEntryElementIdPrefix=e(n=t)?n:"",this},this.listEntryElementTag=function(t){var n;return this.description.listEntryElementTag=e(n=t)?n:"li",this},this.listEntryTextTemplate=function(t){var r,i;return this.description.listEntryTextTemplate=(r=t,i=n,e(r)?r:i),this},this.listEntrySummaryTemplate=function(t){var n,i;return this.description.listEntrySummaryTemplate=(n=t,i=r,e(n)?n:i),this},this.listEntryStyleClassTemplate=function(t){var n,r;return this.description.listEntryStyleClassTemplate=(n=t,r=i,e(n)?n:r),this},this.isSelectableFilterOption=function(e){return this.description.isSelectableFilterOption=!0===e,this},this.build=function(){return this.description}}}(),$85319350d303889b$var$searchmenu.SearchMenuAPI=function(){"use strict";function e(e,t,n){$85319350d303889b$var$eventlistener.addEventListener(e,t,n)}function t(e){return $85319350d303889b$var$eventtarget.getEventTarget(e)}function n(e,t){var n=RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function r(e){return"string"==typeof e&&null!=e&&""!=e}return function(){this.config={triggerSearch:function(){throw Error("search service needs to be defined.")},convertData:function(e){return e},resolveTemplate:function(){throw Error("template resolver needs to be defined.")},addPredefinedParametersTo:function(){},onCreatedElement:function(){},navigateTo:function(e){window.location.href=e},createdElementListeners:[],searchAreaElementId:"searcharea",inputElementId:"searchinputtext",searchTextParameterName:"searchtext",resultsView:new $85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder().viewElementId("searchresults").listParentElementId("searchmatches").listEntryElementIdPrefix("result").listEntryTextTemplate("{{abbreviation}} {{displayName}}").listEntrySummaryTemplate("{{summaries[0].abbreviation}} <b>{{summaries[1].value}}</b><br>{{summaries[2].value}}: {{summaries[0].value}}").build(),detailView:new $85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder().viewElementId("searchdetails").listParentElementId("searchdetailentries").listEntryElementIdPrefix("detail").listEntryTextTemplate("<b>{{displayName}}:</b> {{value}}").build(),filterOptionsView:new $85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder().viewElementId("searchfilteroptions").listParentElementId("searchfilteroptionentries").listEntryElementIdPrefix("filter").listEntryTextTemplate("{{value}}").listEntrySummaryTemplate("{{summaries[0].value}}").isSelectableFilterOption(!0).build(),filtersView:new $85319350d303889b$var$searchmenu.SearchViewDescriptionBuilder().viewElementId("searchresults").listParentElementId("searchfilters").listEntryElementIdPrefix("filter").isSelectableFilterOption(!0).build(),waitBeforeClose:700,waitBeforeSearch:500,waitBeforeMouseOver:700},this.searchService=function(e){return this.config.triggerSearch=e,this},this.dataConverter=function(e){return this.config.convertData=e,this},this.templateResolver=function(e){return this.config.resolveTemplate=e,this},this.addPredefinedParametersTo=function(e){return this.config.addPredefinedParametersTo=e,this},this.setElementCreatedHandler=function(e){return this.config.onCreatedElement=e,this},this.addElementCreatedHandler=function(e){return this.config.createdElementListeners.push(e),this},this.addFocusStyleClassOnEveryCreatedElement=function(i){var l,a=r(l=i)?l:"focus";return this.addElementCreatedHandler(function(r,i){i&&(e("focus",r,function(e){var r,i,l;n(r=a,i=t(e)),l=i.className.length>0?" ":"",i.className+=l+r}),e("blur",r,function(e){n(a,t(e))}))}),this},this.searchAreaElementId=function(e){var t;return this.config.searchAreaElementId=r(t=e)?t:"searcharea",this},this.inputElementId=function(e){var t;return this.config.inputElementId=r(t=e)?t:"searchinputtext",this},this.searchTextParameterName=function(e){var t;return this.config.searchTextParameterName=r(t=e)?t:"searchtext",this},this.resultsView=function(e){return this.config.resultsView=e,this},this.detailView=function(e){return this.config.detailView=e,this},this.filterOptionsView=function(e){return this.config.filterOptionsView=e,this},this.filtersView=function(e){return this.config.filtersView=e,this},this.waitBeforeClose=function(e){return this.config.waitBeforeClose=e,this},this.waitBeforeSearch=function(e){return this.config.waitBeforeSearch=e,this},this.waitBeforeMouseOver=function(e){return this.config.waitBeforeMouseOver=e,this},this.start=function(){var e=this.config;return e.createdElementListeners.length>0&&this.setElementCreatedHandler(function(t,n){var r=0;for(r=0;r<e.createdElementListeners.length;r+=1)e.createdElementListeners[r](t,n)}),new $85319350d303889b$var$searchmenu.SearchMenuUI(e)}}}(),$85319350d303889b$var$searchmenu.SearchMenuUI=function(){"use strict";function e(e){return function(t,n){var r;for(r=0;r<e.length;r+=1)if(t[e[r]]!=n[e[r]])return!1;return!0}}function t(e,t){z(e,i(t,u)),U(e,i(t,c)),H(e,i(t,s)),Y(e,i(t,I))}function n(e,t){q(e,t),J(e,t)}function r(e,t){Z("mousedown",e,t),A(e,t)}function i(e,t){return function(n){t(n,e)}}function l(e,t,n){return function(r){n(r,e,t)}}function a(e){var t=e.split("--");t.length<2&&console.log("expected at least one '--' separator inside the id "+e);var n=t[0],r=parseInt(t[1]),i=t[t.length-2],l=parseInt(t[t.length-1]),a=e.substring(0,e.lastIndexOf(l)-2);return{id:e,type:i,index:l,previousId:a+"--"+(l-1),nextId:a+"--"+(l+1),firstId:a+"--1",lastId:a+"--"+document.getElementById(e).parentElement.childNodes.length,mainMenuId:n+"--"+r,mainMenuIndex:r,hiddenFieldsId:e+"--fields",isFirstElement:l<=1,isSubMenu:t.length>3,subMenuId:function(t){return e+"--"+t+"--1"},replaceMainMenuIndex:function(t){return n+"--"+t+e.substring(this.mainMenuId.length)},getNewIndexAfterRemovedMainMenuIndex:function(t){if(r<t)return e;if(r==t)throw Error("index "+t+" should had been removed.");return this.replaceMainMenuIndex(r-1)},hiddenFields:function(){var t=document.getElementById(e+"--fields");return JSON.parse(v(t,"textContent",t.innerText))}}}function s(e,t){var n=_(e),r=document.getElementById(t.inputElementId);return n.blur(),r.focus(),$85319350d303889b$var$selectionrange.moveCursorToEndOf(r),$(e),O(t),r}function o(e,t){var n=_(e),r=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1");r&&(n.blur(),r.focus())}function u(e,t){d(e,function(e){var n=null;return e.type===t.resultsView.listEntryElementIdPrefix&&(n=document.getElementById(t.filterOptionsView.listEntryElementIdPrefix+"--1")),null===n&&(n=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1")),n}),O(t)}function c(e,t){f(e,function(n){var r=null;if(n.type===t.filterOptionsView.listEntryElementIdPrefix){var i=P(t.resultsView.listEntryElementIdPrefix);r=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--"+i)}return null===r?s(e,t):r}),O(t)}function d(e,t){var n=_(e),r=a(n.id);r.isSubMenu&&$(e);var i=document.getElementById(r.nextId);null==i&&"function"==typeof t&&(i=t(r)),null==i&&(i=document.getElementById(r.firstId)),null!=i&&(n.blur(),i.focus())}function f(e,t){var n=_(e),r=a(n.id);r.isSubMenu&&$(e);var i=document.getElementById(r.previousId);null==i&&"function"==typeof t&&(i=t(r)),null==i&&(i=document.getElementById(r.lastId)),null!=i&&(n.blur(),i.focus())}function m(t,n,r){(function(e,t,n){var r,l,a,s,o;q(e,T),l=e,a=r=i(n,b),Z("keydown",l,function(e){("Del"==e.key||"Delete"==e.key||46==j(e))&&a(e)}),s=e,o=r,Z("keydown",s,function(e){("Backspace"==e.key||8==j(e))&&o(e)})})(h(function(e,t,n){var r,i,l=a(e).hiddenFields();for(r=0;r<t.length;r+=1)if(n(i=t[r],l))return i;return console.log("error: no selected entry found for id "+e+" in "+t),null}(_(t).id,n,e(["fieldName","value"])),n,r.filtersView,r),0,r),$(t),w(t)}function h(e,n,r,i){var s,o,u,c,d,f,m,h=P(r.listEntryElementIdPrefix),p=r.listEntryElementIdPrefix+"--"+(h+1),g=(s=v(e,"category",""),o=e.fieldName,u=r.listParentElementId,c=null,null!=(d=E(u,function(e){var t=a(e.id).hiddenFields();if(t.fieldName===o){var n=v(t,"category","");if(""===n)c=e;else if(n===s)return e}}))?d:c);if(null!=g){var w,I=N(e,r,g.id,i.resolveTemplate);return(w=g).innerHTML=I,g=w}var $=N(e,r,p,i.resolveTemplate);return g=B(e,r,p,$),L(V(e,r,i.resolveTemplate),g),x(g,i.onCreatedElement),Z("mousedown",f=g,m=l(n,i,y)),A(f,m),J(f,m),t(g,i),g}function v(e,t,n){return void 0===e[t]?n:e[t]}function E(e,t){var n,r,i=document.getElementById(e);for(n=0;n<i.childNodes.length;n+=1)if(r=t(i.childNodes[n]))return r;return null}function p(e,t,n){O(n),g(e,t,n.detailView,n),$(e)}function y(e,t,n){O(n),g(e,t,n.filterOptionsView,n)}function g(e,t,n,r){(function(e){var t=document.getElementById(e);if("function"==typeof t.cloneNode&&"function"==typeof t.replaceChild){var n=t.cloneNode(!1);t.parentNode.replaceChild(n,t)}else t.innerHTML=""})(n.listParentElementId);var i,a,s,o,u,c=_(e),h=null,v=null,E=0,p=c.id+"--"+n.listEntryElementIdPrefix,y=null;for(E=0;E<t.length;E+=1)h=t[E],p=c.id+"--"+n.listEntryElementIdPrefix+"--"+(E+1),u=N(h,n,p,r.resolveTemplate),v=B(h,n,p,u),L(V(h,n,r.resolveTemplate),v),x(v,r.onCreatedElement),n.isSelectableFilterOption&&(z(a=v,d),U(a,f),Y(a,w),H(a,w),Z("mousedown",s=v,o=l(t,r,m)),A(s,o),q(s,o)),0===E&&(y=v);var g=R(c,function(e){return"DIV"==e.tagName}),I=document.getElementById(n.viewElementId),$=g.offsetWidth+15,T=(void 0!==(i=c.getBoundingClientRect()).y?i.y:i.top)+(void 0!==window.pageYOffset?window.pageYOffset:"CSS1Compat"===(document.compatMode||"")?document.documentElement.scrollTop:document.body.scrollTop);I.style.left=$+"px",I.style.top=T+"px",L("show",I),n.isSelectableFilterOption&&(c.blur(),y.focus())}function w(e){var t,n=_(e),r=a(n.id),i=document.getElementById(r.mainMenuId);n.blur(),i.focus(),null!=(t=R(n,function(e){return F("show",e)}))&&function(e){D("show",e)}(t)}function I(e,t){O(t)}function $(e){void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1}function T(e){var t,n;$(e),F(t="inactive",n=_(e))?D(t,n):L(t,n)}function b(e,t){var n,r,i;$(e),c(e,t),r=(n=_(e)).parentElement,i=a(n.id).mainMenuIndex,r.removeChild(n),function e(t,n,r,i){!(n>r)&&t.childNodes&&S(t.childNodes,function(t){i(t),e(t,n+1,r,i)})}(r,0,5,function(e){e.id&&(e.id=a(e.id).getNewIndexAfterRemovedMainMenuIndex(i))})}function x(e,t){e.id&&t(e,!0),S(e.childNodes,function(e){e.id&&t(e,!1)})}function S(e,t){var n=0;for(n=0;n<e.length;n+=1)t(e[n],n+1)}function P(e){var t=document.getElementById(e+"--1");return null===t?0:t.parentElement.childNodes.length}function B(e,t,n,r){var i,l,a,s,o=(i=r,l=n,a=t.listEntryElementTag,(s=document.createElement(a)).id=l,s.tabIndex="0",s.innerHTML=i,s);return document.getElementById(t.listParentElementId).appendChild(o),o}function N(e,t,n,r){var i=r(t.listEntryTextTemplate,e);return void 0!==e.summaries&&(i=r(t.listEntrySummaryTemplate,e)),i+='<p id="'+n+'--fields" style="display: none">'+JSON.stringify(e)+"</p>"}function V(e,t,n){var r=n(t.listEntryStyleClassTemplate,e);return n(r,{view:t})}function C(e){M(e.resultsView.viewElementId),M(e.detailView.viewElementId),M(e.filterOptionsView.viewElementId)}function O(e){M(e.detailView.viewElementId),M(e.filterOptionsView.viewElementId)}function k(e){L("show",document.getElementById(e))}function M(e){D("show",document.getElementById(e))}function R(e,t){for(var n=e;null!=n;){if(t(n))return n;n=n.parentNode}return null}function L(e,t){D(e,t);var n=t.className.length>0?" ":"";t.className+=n+e}function D(e,t){var n=RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function F(e,t){return null!=t.className&&t.className.indexOf(e)>=0}function H(e,t){Z("keydown",e,function(e){("Escape"==e.key||"Esc"==e.key||27==j(e))&&t(e)})}function A(e,t){Z("keydown",e,function(e){("Enter"==e.key||13==j(e))&&t(e)})}function q(e,t){Z("keydown",e,function(e){(" "==e.key||"Spacebar"==e.key||32==j(e))&&t(e)})}function U(e,t){Z("keydown",e,function(e){("ArrowUp"==e.key||"Up"==e.key||38==j(e))&&t(e)})}function z(e,t){Z("keydown",e,function(e){("ArrowDown"==e.key||"Down"==e.key||40==j(e))&&t(e)})}function J(e,t){Z("keydown",e,function(e){("ArrowRight"==e.key||"Right"==e.key||39==j(e))&&t(e)})}function Y(e,t){Z("keydown",e,function(e){("ArrowLeft"==e.key||"Left"==e.key||37==j(e))&&t(e)})}function Z(e,t,n){$85319350d303889b$var$eventlistener.addEventListener(e,t,n)}function _(e){return $85319350d303889b$var$eventtarget.getEventTarget(e)}function j(e){return void 0===e.keyCode?-1:e.keyCode}return function(n){this.config=n,this.currentSearchText="",this.focusOutTimer=null,this.waitBeforeSearchTimer=null;var s=document.getElementById(n.inputElementId);H(s,function(e){_(e).value="",C(n)}),z(s,i(n,o)),Z("keyup",s,function(i){null!==this.waitBeforeSearchTimer&&clearTimeout(this.waitBeforeSearchTimer);var s=_(i).value;this.waitBeforeSearchTimer=window.setTimeout(function(){(s!==this.currentSearchText||""===this.currentSearchText)&&(function(n,i){var s,o,u,c,d;if(document.getElementById(i.resultsView.listParentElementId).innerHTML="",0===n.length){C(i);return}k(i.resultsView.viewElementId),s=n,(d=(u=(o=i).filtersView.listParentElementId,c={},E(u,function(e){var t=a(e.id).hiddenFields();if(void 0===t.fieldName||void 0===t.value||F("inactive",e))return null;c[t.fieldName]=t.value}),c))[o.searchTextParameterName]=s,o.addPredefinedParametersTo(d),o.triggerSearch(d,function(n){(function(n,i){var s=0;for(s=0;s<n.length;s+=1)(function(n,i,s){var o=s.resultsView.listEntryElementIdPrefix+"--"+i,u=N(n,s.resultsView,o,s.resolveTemplate),c=B(n,s.resultsView,o,u);if(L(V(n,s.resultsView,s.resolveTemplate),c),x(c,s.onCreatedElement),void 0!==n.details&&(q(d=c,f=l(n.details,s,p)),J(d,f),function(e,t,n){Z("mouseover",e,function(r){this.originalEvent=function(e){for(var t={},n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],l=e[i];t[i]=l}return t}(r),this.delayedHandlerTimer=window.setTimeout(function(){n(void 0!==this.originalEvent?this.originalEvent:r)},t),this.preventEventHandling=function(){null!==this.delayedHandlerTimer&&clearTimeout(this.delayedHandlerTimer)},Z("mouseout",e,this.preventEventHandling),Z("mousedown",e,this.preventEventHandling),Z("keydown",e,this.preventEventHandling)})}(c,s.waitBeforeMouseOver,l(n.details,s,p)),r(c,function(){var e=function(e,t){return E(e,function(e){var n=a(e.id).hiddenFields(),r=v(n,"urltemplate",[""])[0];if(""===r)return null;var i=v(n,t,"");return i!=t&&""!==i||F("inactive",e)?null:r.value})}(s.filtersView.listParentElementId,v(n,"category",""));if(e){var t=s.resolveTemplate(e,n);s.navigateTo(t)}})),void 0!==n.options){var d,f,m,g,w=n.options;void 0!==n.default&&(w=function(e,t,n){if(!t)return e;var r,i=!1;for(r=0;r<e.length;r+=1)if(n(e[r],t)){i=!0;break}if(i)return e;var l=[];for(l.push(t),r=0;r<e.length;r+=1)l.push(e[r]);return l}(n.options,n.default[0],e(["value"])),q(h(n.default[0],w,s.filtersView,s),l(w,s,y))),q(m=c,g=l(n.options,s,y)),J(m,g),r(c,l(n.options,s,y))}t(c,s)})(n[s],s+1,i)})(o.convertData(n),o)})}(s,n),this.currentSearchText=s)},n.waitBeforeSearch)});var u=document.getElementById(n.searchAreaElementId);Z("focusin",u,function(){""!==document.getElementById(n.inputElementId).value&&(null!=this.focusOutTimer&&clearTimeout(this.focusOutTimer),k(n.resultsView.viewElementId))}),Z("focusout",u,function(){this.focusOutTimer=window.setTimeout(function(){C(n)},n.waitBeforeClose)})}}();
//# sourceMappingURL=search-menu-ui.js.map
