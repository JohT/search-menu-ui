var e=globalThis,t={},n={},i=e.parcelRequire94c2;null==i&&((i=function(e){if(e in t)return t[e].exports;if(e in n){var i=n[e];delete n[e];var r={id:e,exports:{}};return t[e]=r,i.call(r.exports,r,r.exports),r.exports}var l=Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){n[e]=t},e.parcelRequire94c2=i);var r=i.register;r("6Zl5q",function(e,t){var n=n||{};(n.exports={}).getEventTarget=function(e){if(void 0!==e.currentTarget&&null!=e.currentTarget)return e.currentTarget;if(void 0!==e.srcElement&&null!=e.srcElement)return e.srcElement;throw Error("Event doesn't contain bounded element: "+e)}}),r("e8zLT",function(e,t){var n=n||{};(n.exports={}).moveCursorToEndOf=function(e){if("function"==typeof e.setSelectionRange)e.setSelectionRange(e.value.length,e.value.length);else if("number"==typeof e.selectionStart&&"number"==typeof e.selectionEnd)e.selectionStart=e.selectionEnd=e.value.length;else if("function"==typeof e.createTextRange){var t=e.createTextRange();t.collapse(!0),t.moveEnd("character",e.value.length),t.moveStart("character",e.value.length),t.select()}}}),r("lTEEA",function(e,t){var n=n||{};(n.exports={}).addEventListener=function(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}});var l=o(l);function o(e){return e||{}}var s=l.exports={};s.internalCreateIfNotExists=o;var u=u||i("6Zl5q"),a=a||i("e8zLT"),c=c||i("lTEEA");s.SearchViewDescriptionBuilder=function(){function e(e){return"string"==typeof e&&null!=e&&""!=e}return function(t){var n="{{displayName}}: {{value}}",i="{{summaries[0].displayName}}: {{summaries[0].value}}",r="{{view.listEntryElementIdPrefix}} {{category}}";this.description={viewElementId:t?t.viewElementId:"",listParentElementId:t?t.listParentElementId:"",listEntryElementIdPrefix:t?t.listEntryElementIdPrefix:"",listEntryElementTag:t?t.listEntryElementTag:"li",listEntryTextTemplate:t?t.listEntryTextTemplate:n,listEntrySummaryTemplate:t?t.listEntrySummaryTemplate:i,listEntryStyleClassTemplate:t?t.listEntryStyleClassTemplate:r,isSelectableFilterOption:!!t&&t.isSelectableFilterOption},this.viewElementId=function(t){return this.description.viewElementId=e(t)?t:"",this},this.listParentElementId=function(t){return this.description.listParentElementId=e(t)?t:"",this},this.listEntryElementIdPrefix=function(t){return this.description.listEntryElementIdPrefix=e(t)?t:"",this},this.listEntryElementTag=function(t){return this.description.listEntryElementTag=e(t)?t:"li",this},this.listEntryTextTemplate=function(t){return this.description.listEntryTextTemplate=e(t)?t:n,this},this.listEntrySummaryTemplate=function(t){return this.description.listEntrySummaryTemplate=e(t)?t:i,this},this.listEntryStyleClassTemplate=function(t){return this.description.listEntryStyleClassTemplate=e(t)?t:r,this},this.isSelectableFilterOption=function(e){return this.description.isSelectableFilterOption=!0===e,this},this.build=function(){return this.description}}}(),s.SearchMenuAPI=function(){function e(e,t,n){c.addEventListener(e,t,n)}function t(e){return u.getEventTarget(e)}function n(e,t){var n=RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function i(e){return"string"==typeof e&&null!=e&&""!=e}return function(){this.config={triggerSearch:function(){throw Error("search service needs to be defined.")},convertData:function(e){return e},resolveTemplate:function(){throw Error("template resolver needs to be defined.")},addPredefinedParametersTo:function(){},onCreatedElement:function(){},navigateTo:function(e){window.location.href=e},createdElementListeners:[],searchAreaElementId:"searcharea",inputElementId:"searchinputtext",searchTextParameterName:"searchtext",resultsView:new s.SearchViewDescriptionBuilder().viewElementId("searchresults").listParentElementId("searchmatches").listEntryElementIdPrefix("result").listEntryTextTemplate("{{abbreviation}} {{displayName}}").listEntrySummaryTemplate("{{summaries[0].abbreviation}} <b>{{summaries[1].value}}</b><br>{{summaries[2].value}}: {{summaries[0].value}}").build(),detailView:new s.SearchViewDescriptionBuilder().viewElementId("searchdetails").listParentElementId("searchdetailentries").listEntryElementIdPrefix("detail").listEntryTextTemplate("<b>{{displayName}}:</b> {{value}}").build(),filterOptionsView:new s.SearchViewDescriptionBuilder().viewElementId("searchfilteroptions").listParentElementId("searchfilteroptionentries").listEntryElementIdPrefix("filter").listEntryTextTemplate("{{value}}").listEntrySummaryTemplate("{{summaries[0].value}}").isSelectableFilterOption(!0).build(),filtersView:new s.SearchViewDescriptionBuilder().viewElementId("searchresults").listParentElementId("searchfilters").listEntryElementIdPrefix("filter").isSelectableFilterOption(!0).build(),waitBeforeClose:700,waitBeforeSearch:500,waitBeforeMouseOver:700},this.searchService=function(e){return this.config.triggerSearch=e,this},this.dataConverter=function(e){return this.config.convertData=e,this},this.templateResolver=function(e){return this.config.resolveTemplate=e,this},this.addPredefinedParametersTo=function(e){return this.config.addPredefinedParametersTo=e,this},this.setElementCreatedHandler=function(e){return this.config.onCreatedElement=e,this},this.addElementCreatedHandler=function(e){return this.config.createdElementListeners.push(e),this},this.addFocusStyleClassOnEveryCreatedElement=function(r){var l=i(r)?r:"focus";return this.addElementCreatedHandler(function(i,r){r&&(e("focus",i,function(e){var i,r;n(l,i=t(e)),r=i.className.length>0?" ":"",i.className+=r+l}),e("blur",i,function(e){n(l,t(e))}))}),this},this.searchAreaElementId=function(e){return this.config.searchAreaElementId=i(e)?e:"searcharea",this},this.inputElementId=function(e){return this.config.inputElementId=i(e)?e:"searchinputtext",this},this.searchTextParameterName=function(e){return this.config.searchTextParameterName=i(e)?e:"searchtext",this},this.resultsView=function(e){return this.config.resultsView=e,this},this.detailView=function(e){return this.config.detailView=e,this},this.filterOptionsView=function(e){return this.config.filterOptionsView=e,this},this.filtersView=function(e){return this.config.filtersView=e,this},this.waitBeforeClose=function(e){return this.config.waitBeforeClose=e,this},this.waitBeforeSearch=function(e){return this.config.waitBeforeSearch=e,this},this.waitBeforeMouseOver=function(e){return this.config.waitBeforeMouseOver=e,this},this.start=function(){var e=this.config;return e.createdElementListeners.length>0&&this.setElementCreatedHandler(function(t,n){var i=0;for(i=0;i<e.createdElementListeners.length;i+=1)e.createdElementListeners[i](t,n)}),new s.SearchMenuUI(e)}}}(),s.SearchMenuUI=function(){function e(e){return function(t,n){var i;for(i=0;i<e.length;i+=1)if(t[e[i]]!=n[e[i]])return!1;return!0}}function t(e,t){Z(e,i(t,d)),Y(e,i(t,f)),q(e,i(t,o)),j(e,i(t,x))}function n(e,t){W("mousedown",e,t),z(e,t)}function i(e,t){return function(n){t(n,e)}}function r(e,t,n){return function(i){n(i,e,t)}}function l(e){var t=e.split("--");t.length<2&&console.log("expected at least one '--' separator inside the id "+e);var n=t[0],i=parseInt(t[1]),r=t[t.length-2],l=parseInt(t[t.length-1]),o=e.substring(0,e.lastIndexOf(l)-2);return{id:e,type:r,index:l,previousId:o+"--"+(l-1),nextId:o+"--"+(l+1),firstId:o+"--1",lastId:o+"--"+document.getElementById(e).parentElement.childNodes.length,mainMenuId:n+"--"+i,mainMenuIndex:i,hiddenFieldsId:e+"--fields",isFirstElement:l<=1,isSubMenu:t.length>3,subMenuId:function(t){return e+"--"+t+"--1"},replaceMainMenuIndex:function(t){return n+"--"+t+e.substring(this.mainMenuId.length)},getNewIndexAfterRemovedMainMenuIndex:function(t){if(i<t)return e;if(i==t)throw Error("index "+t+" should had been removed.");return this.replaceMainMenuIndex(i-1)},hiddenFields:function(){var t=document.getElementById(e+"--fields");return JSON.parse(p(t,"textContent",t.innerText))}}}function o(e,t){var n=G(e),i=document.getElementById(t.inputElementId);return n.blur(),i.focus(),a.moveCursorToEndOf(i),S(e),L(t),i}function s(e,t){var n=G(e),i=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1");i&&(n.blur(),i.focus())}function d(e,t){m(e,function(e){var n=null;return e.type===t.resultsView.listEntryElementIdPrefix&&(n=document.getElementById(t.filterOptionsView.listEntryElementIdPrefix+"--1")),null===n&&(n=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--1")),n}),L(t)}function f(e,t){h(e,function(n){var i=null;if(n.type===t.filterOptionsView.listEntryElementIdPrefix){var r=N(t.resultsView.listEntryElementIdPrefix);i=document.getElementById(t.resultsView.listEntryElementIdPrefix+"--"+r)}return null===i?o(e,t):i}),L(t)}function m(e,t){var n=G(e),i=l(n.id);i.isSubMenu&&S(e);var r=document.getElementById(i.nextId);null==r&&"function"==typeof t&&(r=t(i)),null==r&&(r=document.getElementById(i.firstId)),null!=r&&(n.blur(),r.focus())}function h(e,t){var n=G(e),i=l(n.id);i.isSubMenu&&S(e);var r=document.getElementById(i.previousId);null==r&&"function"==typeof t&&(r=t(i)),null==r&&(r=document.getElementById(i.lastId)),null!=r&&(n.blur(),r.focus())}function E(t,n,r){(function(e,t,n){var r,l;J(e,b),l=r=i(n,P),W("keydown",e,function(e){("Del"==e.key||"Delete"==e.key||46==K(e))&&l(e)}),W("keydown",e,function(e){("Backspace"==e.key||8==K(e))&&r(e)})})(v(function(e,t,n){var i,r,o=l(e).hiddenFields();for(i=0;i<t.length;i+=1)if(n(r=t[i],o))return r;return console.log("error: no selected entry found for id "+e+" in "+t),null}(G(t).id,n,e(["fieldName","value"])),n,r.filtersView,r),0,r),S(t),T(t)}function v(e,n,i,o){var s,u,a,c,d,f,m,h=N(i.listEntryElementIdPrefix),E=i.listEntryElementIdPrefix+"--"+(h+1),v=(s=p(e,"category",""),u=e.fieldName,a=i.listParentElementId,c=null,null!=(d=y(a,function(e){var t=l(e.id).hiddenFields();if(t.fieldName===u){var n=p(t,"category","");if(""===n)c=e;else if(n===s)return e}}))?d:c);if(null!=v){var g,I=C(e,i,v.id,o.resolveTemplate);return(g=v).innerHTML=I,v=g}var T=C(e,i,E,o.resolveTemplate);return v=O(e,i,E,T),R(k(e,i,o.resolveTemplate),v),B(v,o.onCreatedElement),W("mousedown",f=v,m=r(n,o,w)),z(f,m),_(f,m),t(v,o),v}function p(e,t,n){return void 0===e[t]?n:e[t]}function y(e,t){var n,i,r=document.getElementById(e);for(n=0;n<r.childNodes.length;n+=1)if(i=t(r.childNodes[n]))return i;return null}function g(e,t,n){L(n),I(e,t,n.detailView,n),S(e)}function w(e,t,n){L(n),I(e,t,n.filterOptionsView,n)}function I(e,t,n,i){(function(e){var t=document.getElementById(e);if("function"==typeof t.cloneNode&&"function"==typeof t.replaceChild){var n=t.cloneNode(!1);t.parentNode.replaceChild(n,t)}else t.innerHTML=""})(n.listParentElementId);var l,o,s,u,a,c=G(e),d=null,f=null,v=0,p=c.id+"--"+n.listEntryElementIdPrefix,y=null;for(v=0;v<t.length;v+=1)d=t[v],p=c.id+"--"+n.listEntryElementIdPrefix+"--"+(v+1),a=C(d,n,p,i.resolveTemplate),f=O(d,n,p,a),R(k(d,n,i.resolveTemplate),f),B(f,i.onCreatedElement),n.isSelectableFilterOption&&(Z(o=f,m),Y(o,h),j(o,T),q(o,T),W("mousedown",s=f,u=r(t,i,E)),z(s,u),J(s,u)),0===v&&(y=f);var g=H(c,function(e){return"DIV"==e.tagName}),w=document.getElementById(n.viewElementId),I=g.offsetWidth+15,x=(void 0!==(l=c.getBoundingClientRect()).y?l.y:l.top)+(void 0!==window.pageYOffset?window.pageYOffset:"CSS1Compat"===(document.compatMode||"")?document.documentElement.scrollTop:document.body.scrollTop);w.style.left=I+"px",w.style.top=x+"px",R("show",w),n.isSelectableFilterOption&&(c.blur(),y.focus())}function T(e){var t,n=G(e),i=l(n.id),r=document.getElementById(i.mainMenuId);n.blur(),r.focus(),null!=(t=H(n,function(e){return U("show",e)}))&&A("show",t)}function x(e,t){L(t)}function S(e){void 0!==e.preventDefault?e.preventDefault():e.returnValue=!1}function b(e){var t,n;S(e),U(t="inactive",n=G(e))?A(t,n):R(t,n)}function P(e,t){var n,i,r;S(e),f(e,t),i=(n=G(e)).parentElement,r=l(n.id).mainMenuIndex,i.removeChild(n),function e(t,n,i,r){!(n>i)&&t.childNodes&&V(t.childNodes,function(t){r(t),e(t,n+1,i,r)})}(i,0,5,function(e){e.id&&(e.id=l(e.id).getNewIndexAfterRemovedMainMenuIndex(r))})}function B(e,t){e.id&&t(e,!0),V(e.childNodes,function(e){e.id&&t(e,!1)})}function V(e,t){var n=0;for(n=0;n<e.length;n+=1)t(e[n],n+1)}function N(e){var t=document.getElementById(e+"--1");return null===t?0:t.parentElement.childNodes.length}function O(e,t,n,i){var r,l,o=(r=t.listEntryElementTag,(l=document.createElement(r)).id=n,l.tabIndex="0",l.innerHTML=i,l);return document.getElementById(t.listParentElementId).appendChild(o),o}function C(e,t,n,i){var r=i(t.listEntryTextTemplate,e);return void 0!==e.summaries&&(r=i(t.listEntrySummaryTemplate,e)),r+='<p id="'+n+'--fields" style="display: none">'+JSON.stringify(e)+"</p>"}function k(e,t,n){var i=n(t.listEntryStyleClassTemplate,e);return n(i,{view:t})}function M(e){F(e.resultsView.viewElementId),F(e.detailView.viewElementId),F(e.filterOptionsView.viewElementId)}function L(e){F(e.detailView.viewElementId),F(e.filterOptionsView.viewElementId)}function D(e){R("show",document.getElementById(e))}function F(e){A("show",document.getElementById(e))}function H(e,t){for(var n=e;null!=n;){if(t(n))return n;n=n.parentNode}return null}function R(e,t){A(e,t);var n=t.className.length>0?" ":"";t.className+=n+e}function A(e,t){var n=RegExp("\\s?\\b"+e+"\\b","gi");t.className=t.className.replace(n,"")}function U(e,t){return null!=t.className&&t.className.indexOf(e)>=0}function q(e,t){W("keydown",e,function(e){("Escape"==e.key||"Esc"==e.key||27==K(e))&&t(e)})}function z(e,t){W("keydown",e,function(e){("Enter"==e.key||13==K(e))&&t(e)})}function J(e,t){W("keydown",e,function(e){(" "==e.key||"Spacebar"==e.key||32==K(e))&&t(e)})}function Y(e,t){W("keydown",e,function(e){("ArrowUp"==e.key||"Up"==e.key||38==K(e))&&t(e)})}function Z(e,t){W("keydown",e,function(e){("ArrowDown"==e.key||"Down"==e.key||40==K(e))&&t(e)})}function _(e,t){W("keydown",e,function(e){("ArrowRight"==e.key||"Right"==e.key||39==K(e))&&t(e)})}function j(e,t){W("keydown",e,function(e){("ArrowLeft"==e.key||"Left"==e.key||37==K(e))&&t(e)})}function W(e,t,n){c.addEventListener(e,t,n)}function G(e){return u.getEventTarget(e)}function K(e){return void 0===e.keyCode?-1:e.keyCode}return function(o){this.config=o,this.currentSearchText="",this.focusOutTimer=null,this.waitBeforeSearchTimer=null;var u=document.getElementById(o.inputElementId);q(u,function(e){G(e).value="",M(o)}),Z(u,i(o,s)),W("keyup",u,function(i){null!==this.waitBeforeSearchTimer&&clearTimeout(this.waitBeforeSearchTimer);var s=G(i).value;this.waitBeforeSearchTimer=window.setTimeout(function(){(s!==this.currentSearchText||""===this.currentSearchText)&&(function(i,o){var s,u,a;if(document.getElementById(o.resultsView.listParentElementId).innerHTML="",0===i.length){M(o);return}D(o.resultsView.viewElementId),(s=o.filtersView.listParentElementId,u={},y(s,function(e){var t=l(e.id).hiddenFields();if(void 0===t.fieldName||void 0===t.value||U("inactive",e))return null;u[t.fieldName]=t.value}),a=u)[o.searchTextParameterName]=i,o.addPredefinedParametersTo(a),o.triggerSearch(a,function(i){(function(i,o){var s=0;for(s=0;s<i.length;s+=1)(function(i,o,s){var u=s.resultsView.listEntryElementIdPrefix+"--"+o,a=C(i,s.resultsView,u,s.resolveTemplate),c=O(i,s.resultsView,u,a);if(R(k(i,s.resultsView,s.resolveTemplate),c),B(c,s.onCreatedElement),void 0!==i.details&&(J(c,d=r(i.details,s,g)),_(c,d),function(e,t,n){W("mouseover",e,function(i){this.originalEvent=function(e){for(var t={},n=Object.keys(e),i=0;i<n.length;i++){var r=n[i],l=e[r];t[r]=l}return t}(i),this.delayedHandlerTimer=window.setTimeout(function(){n(void 0!==this.originalEvent?this.originalEvent:i)},t),this.preventEventHandling=function(){null!==this.delayedHandlerTimer&&clearTimeout(this.delayedHandlerTimer)},W("mouseout",e,this.preventEventHandling),W("mousedown",e,this.preventEventHandling),W("keydown",e,this.preventEventHandling)})}(c,s.waitBeforeMouseOver,r(i.details,s,g)),n(c,function(){var e=function(e,t){return y(e,function(e){var n=l(e.id).hiddenFields(),i=p(n,"urltemplate",[""])[0];if(""===i)return null;var r=p(n,t,"");return r!=t&&""!==r||U("inactive",e)?null:i.value})}(s.filtersView.listParentElementId,p(i,"category",""));if(e){var t=s.resolveTemplate(e,i);s.navigateTo(t)}})),void 0!==i.options){var d,f,m=i.options;void 0!==i.default&&(m=function(e,t,n){if(!t)return e;var i,r=!1;for(i=0;i<e.length;i+=1)if(n(e[i],t)){r=!0;break}if(r)return e;var l=[];for(l.push(t),i=0;i<e.length;i+=1)l.push(e[i]);return l}(i.options,i.default[0],e(["value"])),J(v(i.default[0],m,s.filtersView,s),r(m,s,w))),J(c,f=r(i.options,s,w)),_(c,f),n(c,r(i.options,s,w))}t(c,s)})(i[s],s+1,o)})(o.convertData(i),o)})}(s,o),this.currentSearchText=s)},o.waitBeforeSearch)});var a=document.getElementById(o.searchAreaElementId);W("focusin",a,function(){""!==document.getElementById(o.inputElementId).value&&(null!=this.focusOutTimer&&clearTimeout(this.focusOutTimer),D(o.resultsView.viewElementId))}),W("focusout",a,function(){this.focusOutTimer=window.setTimeout(function(){M(o)},o.waitBeforeClose)})}}();
//# sourceMappingURL=search-menu-ui.js.map
